!function(A,n){"object"==typeof exports&&"object"==typeof module?module.exports=n(require("@astuanax/funmatrix"),require("fun.js")):"function"==typeof define&&define.amd?define("@astuanax/funml",["@astuanax/funmatrix","fun.js"],n):"object"==typeof exports?exports["@astuanax/funml"]=n(require("@astuanax/funmatrix"),require("fun.js")):A["@astuanax/funml"]=n(A["@astuanax/funmatrix"],A["fun.js"])}("undefined"!=typeof self?self:this,function(A,n){return function(A){var n={};function e(t){if(n[t])return n[t].exports;var l=n[t]={i:t,l:!1,exports:{}};return A[t].call(l.exports,l,l.exports,e),l.l=!0,l.exports}return e.m=A,e.c=n,e.d=function(A,n,t){e.o(A,n)||Object.defineProperty(A,n,{enumerable:!0,get:t})},e.r=function(A){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(A,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(A,"__esModule",{value:!0})},e.t=function(A,n){if(1&n&&(A=e(A)),8&n)return A;if(4&n&&"object"==typeof A&&A&&A.__esModule)return A;var t=Object.create(null);if(e.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:A}),2&n&&"string"!=typeof A)for(var l in A)e.d(t,l,function(n){return A[n]}.bind(null,l));return t},e.n=function(A){var n=A&&A.__esModule?function(){return A.default}:function(){return A};return e.d(n,"a",n),n},e.o=function(A,n){return Object.prototype.hasOwnProperty.call(A,n)},e.p="",e(e.s=2)}([function(n,e){n.exports=A},function(A,e){A.exports=n},function(A,n,e){A.exports=e(3)},function(A,n,e){"use strict";e.r(n);var t,l,i,o,c,a,u=(t="/Volumes/BigOne/github/funml/src/Perceptron.js",l="d0c34d37814448cc885edd5812645c66c8e3c494",i=new(0,function(){}.constructor)("return this")(),c={path:"/Volumes/BigOne/github/funml/src/Perceptron.js",statementMap:{0:{start:{line:10,column:17},end:{line:12,column:1}},1:{start:{line:11,column:2},end:{line:11,column:31}},2:{start:{line:28,column:0},end:{line:37,column:2}},3:{start:{line:29,column:2},end:{line:29,column:44}},4:{start:{line:29,column:33},end:{line:29,column:44}},5:{start:{line:31,column:2},end:{line:34,column:3}},6:{start:{line:32,column:4},end:{line:32,column:23}},7:{start:{line:33,column:4},end:{line:33,column:16}},8:{start:{line:36,column:2},end:{line:36,column:29}},9:{start:{line:44,column:0},end:{line:44,column:41}},10:{start:{line:58,column:0},end:{line:66,column:2}},11:{start:{line:59,column:14},end:{line:59,column:18}},12:{start:{line:61,column:19},end:{line:61,column:34}},13:{start:{line:62,column:2},end:{line:64,column:5}},14:{start:{line:63,column:4},end:{line:63,column:43}},15:{start:{line:65,column:2},end:{line:65,column:33}},16:{start:{line:83,column:0},end:{line:103,column:2}},17:{start:{line:84,column:15},end:{line:84,column:19}},18:{start:{line:86,column:2},end:{line:88,column:5}},19:{start:{line:87,column:4},end:{line:87,column:13}},20:{start:{line:90,column:2},end:{line:102,column:3}},21:{start:{line:91,column:4},end:{line:101,column:7}},22:{start:{line:92,column:21},end:{line:92,column:35}},23:{start:{line:93,column:16},end:{line:93,column:30}},24:{start:{line:95,column:23},end:{line:95,column:42}},25:{start:{line:97,column:18},end:{line:97,column:39}},26:{start:{line:98,column:6},end:{line:100,column:9}},27:{start:{line:99,column:8},end:{line:99,column:51}}},fnMap:{0:{name:"Perceptron",decl:{start:{line:10,column:26},end:{line:10,column:36}},loc:{start:{line:10,column:46},end:{line:12,column:1}},line:10},1:{name:"(anonymous_1)",decl:{start:{line:28,column:16},end:{line:28,column:17}},loc:{start:{line:28,column:31},end:{line:37,column:1}},line:28},2:{name:"(anonymous_2)",decl:{start:{line:58,column:31},end:{line:58,column:32}},loc:{start:{line:58,column:46},end:{line:66,column:1}},line:58},3:{name:"(anonymous_3)",decl:{start:{line:62,column:14},end:{line:62,column:15}},loc:{start:{line:62,column:30},end:{line:64,column:3}},line:62},4:{name:"(anonymous_4)",decl:{start:{line:83,column:29},end:{line:83,column:30}},loc:{start:{line:83,column:61},end:{line:103,column:1}},line:83},5:{name:"(anonymous_5)",decl:{start:{line:86,column:63},end:{line:86,column:64}},loc:{start:{line:86,column:76},end:{line:88,column:3}},line:86},6:{name:"(anonymous_6)",decl:{start:{line:91,column:18},end:{line:91,column:19}},loc:{start:{line:91,column:36},end:{line:101,column:5}},line:91},7:{name:"(anonymous_7)",decl:{start:{line:98,column:18},end:{line:98,column:19}},loc:{start:{line:98,column:34},end:{line:100,column:7}},line:98}},branchMap:{0:{loc:{start:{line:11,column:17},end:{line:11,column:30}},type:"binary-expr",locations:[{start:{line:11,column:17},end:{line:11,column:24}},{start:{line:11,column:28},end:{line:11,column:30}}],line:11},1:{loc:{start:{line:29,column:2},end:{line:29,column:44}},type:"if",locations:[{start:{line:29,column:2},end:{line:29,column:44}},{start:{line:29,column:2},end:{line:29,column:44}}],line:29},2:{loc:{start:{line:31,column:2},end:{line:34,column:3}},type:"if",locations:[{start:{line:31,column:2},end:{line:34,column:3}},{start:{line:31,column:2},end:{line:34,column:3}}],line:31},3:{loc:{start:{line:65,column:9},end:{line:65,column:32}},type:"cond-expr",locations:[{start:{line:65,column:27},end:{line:65,column:28}},{start:{line:65,column:31},end:{line:65,column:32}}],line:65}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0]},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/Perceptron.js"],names:["Perceptron","weights","of","val","prototype","type","predict","row","activation","forEach","x","i","train","lRate","nEpoch","Array","apply","length","map","idx","expected","slice","prediction","error","y","j"],mappings:"AAAA;;;;;;;;;AASA,IAAIA,UAAU,GAAG,SAAbA,UAAa,CAAUC,OAAV,EAAmB;AAClC,OAAKA,OAAL,GAAeA,OAAO,IAAI,EAA1B;AACD,CAFD;AAIA;;;;;;;;;;;;;;;AAaAD,UAAU,CAACE,EAAX,GAAgB,UAAUC,GAAV,EAAe;AAC7B,MAAIA,GAAG,YAAYH,UAAnB,EAA+B,OAAOG,GAAP;;AAC/B,MAAI,gBAAgBH,UAApB,EAAgC;AAC9B,SAAKC,OAAL,GAAeE,GAAf;AACA,WAAO,IAAP;AACD;;AACD,SAAO,IAAIH,UAAJ,CAAeG,GAAf,CAAP;AACD,CAPD;AASA;;;;;;AAIAH,UAAU,CAACI,SAAX,CAAqBC,IAArB,GAA4B,YAA5B;AAEA;;;;;;;;;;;;;AAYAL,UAAU,CAACI,SAAX,CAAqBE,OAArB,GAA+B,UAAUC,GAAV,EAAe;AAAA;;AAC5C,MAAIC,UAAU,GAAG,KAAKP,OAAL,CAAa,CAAb,CAAjB;AACAM,EAAAA,GAAG,CAACE,OAAJ,CAAY,UAACC,CAAD,EAAIC,CAAJ,EAAU;AACpBH,IAAAA,UAAU,IAAI,KAAI,CAACP,OAAL,CAAaU,CAAC,GAAG,CAAjB,IAAsBD,CAApC;AACD,GAFD;AAGA,SAAOF,UAAU,IAAI,CAAd,GAAkB,CAAlB,GAAsB,CAA7B;AACD,CAND;AAQA;;;;;;;;;;;;;;;;AAcAR,UAAU,CAACI,SAAX,CAAqBQ,KAArB,GAA6B,UAAUA,KAAV,EAAiBC,KAAjB,EAAwBC,MAAxB,EAAgC;AAAA;;AAC3D,OAAKb,OAAL,GAAec,KAAK,CAACC,KAAN,CAAY,IAAZ,EAAkBD,KAAK,CAACH,KAAK,CAAC,CAAD,CAAL,CAASK,MAAV,CAAvB,EAA0CC,GAA1C,CAA8C,UAAAR,CAAC;AAAA,WAAI,CAAJ;AAAA,GAA/C,CAAf;;AACA,OAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGG,MAApB,EAA4BH,CAAC,EAA7B,EAAiC;AAC/BC,IAAAA,KAAK,CAACH,OAAN,CAAc,UAACC,CAAD,EAAIS,GAAJ,EAAY;AACxB,UAAMC,QAAQ,GAAGV,CAAC,CAACW,KAAF,CAAQ,CAAC,CAAT,EAAY,CAAZ,CAAjB;AACA,UAAMd,GAAG,GAAGG,CAAC,CAACW,KAAF,CAAQ,CAAR,EAAW,CAAC,CAAZ,CAAZ;;AACA,UAAMC,UAAU,GAAG,MAAI,CAAChB,OAAL,CAAaC,GAAb,CAAnB;;AACA,UAAMgB,KAAK,GAAGH,QAAQ,GAAGE,UAAzB;AACAf,MAAAA,GAAG,CAACE,OAAJ,CAAY,UAACe,CAAD,EAAIC,CAAJ,EAAU;AACpB,QAAA,MAAI,CAACxB,OAAL,CAAawB,CAAC,GAAG,CAAjB,KAAuBZ,KAAK,GAAGU,KAAR,GAAgBC,CAAvC;AACD,OAFD;AAGD,KARD;AASD;AACF,CAbD;;AAeA,eAAexB,UAAf",sourcesContent:["/**\n * @class Perceptron\n * @classdesc Perceptron to train and predict\n * @see of\n * @example\n *\n * const m =  Perceptron.of([0.2365698, 0.4567897, 0.95989898, -0.457878787])\n *\n */\nlet Perceptron = function (weights) {\n  this.weights = weights || []\n}\n\n/**\n * @memberOf Perceptron\n * @static\n * @function Perceptron.of\n * @desc Creates a Perceptron object\n * @param weights {array} Weights for predicting\n * @returns {Perceptron}\n * @example\n *\n * const weights = [0.123456, 0.458789, 0.9987454]\n * const m =  Perceptron.of(weights)\n *\n */\nPerceptron.of = function (val) {\n  if (val instanceof Perceptron) return val\n  if (this instanceof Perceptron) {\n    this.weights = val\n    return this\n  }\n  return new Perceptron(val)\n}\n\n/**\n * @memberOf Perceptron\n * @type {string}\n */\nPerceptron.prototype.type = 'Perceptron'\n\n/**\n * @memberOf Perceptron\n * @function Perceptron#predict\n * @param row {Array} Array of values to predict\n * @returns {Boolean}\n * @example\n *\n * const m =  Perceptron.of()\n * const train  = [...] // dataset: [[0,1,2], [1,2,3]]\n * m.train(train, 0.1, 10000)\n * m.predict([1,2,1]) // returns 1 or 0\n */\nPerceptron.prototype.predict = function (row) {\n  var activation = this.weights[0]\n  row.forEach((x, i) => {\n    activation += this.weights[i + 1] * x\n  })\n  return activation >= 0 ? 1 : 0\n}\n\n/**\n * @memberOf Perceptron\n * @function Perceptron#train\n * @param train {Array} Dataset to train the preceptron\n * @param lRate {Number} Set the learning rate of the perceptron\n * @param nEpoch {Number} Set the number of iterations to train the perceptron\n * @example\n *\n * const m =  Perceptron.of()\n * const train  = [...] // dataset: [[0,1,2], [1,2,3]]\n * m.train(train, 0.1, 10000)\n * m.weights = [0.213131, -0.45464, 0.789797]\n *\n */\nPerceptron.prototype.train = function (train, lRate, nEpoch) {\n  this.weights = Array.apply(null, Array(train[0].length)).map(x => 0)\n  for (let i = 0; i < nEpoch; i++) {\n    train.forEach((x, idx) => {\n      const expected = x.slice(-1)[0]\n      const row = x.slice(0, -1)\n      const prediction = this.predict(row)\n      const error = expected - prediction\n      row.forEach((y, j) => {\n        this.weights[j + 1] += lRate * error * y\n      })\n    })\n  }\n}\n\nexport default Perceptron\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},(a=i[o="__coverage__"]||(i[o]={}))[t]&&a[t].hash===l?a[t]:(c.hash=l,a[t]=c));u.s[0]++;var r=function(A){u.f[0]++,u.s[1]++,this.weights=(u.b[0][0]++,A||(u.b[0][1]++,[]))};u.s[2]++,r.of=function(A){return u.f[1]++,u.s[3]++,A instanceof r?(u.b[1][0]++,u.s[4]++,A):(u.b[1][1]++,u.s[5]++,this instanceof r?(u.b[2][0]++,u.s[6]++,this.weights=A,u.s[7]++,this):(u.b[2][1]++,u.s[8]++,new r(A)))},u.s[9]++,r.prototype.type="Perceptron",u.s[10]++,r.prototype.predict=function(A){u.f[2]++;var n=(u.s[11]++,this),e=(u.s[12]++,this.weights[0]);return u.s[13]++,A.forEach(function(A,t){u.f[3]++,u.s[14]++,e+=n.weights[t+1]*A}),u.s[15]++,e>=0?(u.b[3][0]++,1):(u.b[3][1]++,0)},u.s[16]++,r.prototype.train=function(A,n,e){u.f[4]++;var t=(u.s[17]++,this);u.s[18]++,this.weights=Array.apply(null,Array(A[0].length)).map(function(A){return u.f[5]++,u.s[19]++,0}),u.s[20]++;for(var l=0;l<e;l++)u.s[21]++,A.forEach(function(A,e){u.f[6]++;var l=(u.s[22]++,A.slice(-1)[0]),i=(u.s[23]++,A.slice(0,-1)),o=(u.s[24]++,t.predict(i)),c=(u.s[25]++,l-o);u.s[26]++,i.forEach(function(A,e){u.f[7]++,u.s[27]++,t.weights[e+1]+=n*c*A})})};var s=r,m=e(0),C=e.n(m),d=function(){var A="/Volumes/BigOne/github/funml/src/ActivationFunction.js",n="ddbc0ffc9ada184cbaa1a439bf720238b516a2dc",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/ActivationFunction.js",statementMap:{0:{start:{line:1,column:50},end:{line:1,column:151}},1:{start:{line:1,column:92},end:{line:1,column:149}},2:{start:{line:8,column:25},end:{line:13,column:1}},3:{start:{line:9,column:2},end:{line:9,column:44}},4:{start:{line:11,column:2},end:{line:11,column:19}},5:{start:{line:12,column:2},end:{line:12,column:21}}},fnMap:{0:{name:"_classCallCheck",decl:{start:{line:1,column:9},end:{line:1,column:24}},loc:{start:{line:1,column:48},end:{line:1,column:153}},line:1},1:{name:"ActivationFunction",decl:{start:{line:8,column:34},end:{line:8,column:52}},loc:{start:{line:8,column:66},end:{line:13,column:1}},line:8}},branchMap:{0:{loc:{start:{line:1,column:50},end:{line:1,column:151}},type:"if",locations:[{start:{line:1,column:50},end:{line:1,column:151}},{start:{line:1,column:50},end:{line:1,column:151}}],line:1}},s:{0:0,1:0,2:0,3:0,4:0,5:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/ActivationFunction.js"],names:["ActivationFunction","func","dfunc"],mappings:";;AAAA;;;;;IAKqBA,kB,GACnB,4BAAaC,IAAb,EAAmBC,KAAnB,EAA0B;AAAA;;AACxB,OAAKD,IAAL,GAAYA,IAAZ;AACA,OAAKC,KAAL,GAAaA,KAAb;AACD,C;;SAJkBF,kB",sourcesContent:["/**\n * @class ActivationFunction\n * @param func\n * @param dfunc\n */\nexport default class ActivationFunction {\n  constructor (func, dfunc) {\n    this.func = func\n    this.dfunc = dfunc\n  }\n}\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}();d.s[2]++;var f=function A(n,e){d.f[1]++,d.s[3]++,function(A,n){if(d.f[0]++,d.s[0]++,!(A instanceof n))throw d.b[0][0]++,d.s[1]++,new TypeError("Cannot call a class as a function");d.b[0][1]++}(this,A),d.s[4]++,this.func=n,d.s[5]++,this.dfunc=e},p=function(){var A="/Volumes/BigOne/github/funml/src/util/sigmoid.js",n="136b472592660c42f0fbdf4723b0f47e0b39f53a",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/util/sigmoid.js",statementMap:{0:{start:{line:7,column:14},end:{line:11,column:2}},1:{start:{line:8,column:2},end:{line:8,column:32}},2:{start:{line:10,column:2},end:{line:10,column:21}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:37},end:{line:7,column:38}},loc:{start:{line:7,column:50},end:{line:9,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:9,column:3},end:{line:9,column:4}},loc:{start:{line:9,column:16},end:{line:11,column:1}},line:9}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/util/sigmoid.js"],names:["ActivationFunction","sigmoid","x","Math","exp","y"],mappings:"AAAA,OAAOA,kBAAP,MAA+B,uBAA/B;AAEA;;;;;AAIA,IAAMC,OAAO,GAAG,IAAID,kBAAJ,CACd,UAAAE,CAAC;AAAA,SAAI,KAAK,IAAIC,IAAI,CAACC,GAAL,CAAS,CAACF,CAAV,CAAT,CAAJ;AAAA,CADa,EAEd,UAAAG,CAAC;AAAA,SAAIA,CAAC,IAAI,IAAIA,CAAR,CAAL;AAAA,CAFa,CAAhB;AAIA,eAAeJ,OAAf",sourcesContent:["import ActivationFunction from '../ActivationFunction'\n\n/**\n * @function sigmoid\n * @type {ActivationFunction}\n */\nconst sigmoid = new ActivationFunction(\n  x => 1 / (1 + Math.exp(-x)),\n  y => y * (1 - y)\n)\nexport default sigmoid\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}(),B=(p.s[0]++,new f(function(A){return p.f[0]++,p.s[1]++,1/(1+Math.exp(-A))},function(A){return p.f[1]++,p.s[2]++,A*(1-A)})),h=function(){var A="/Volumes/BigOne/github/funml/src/NeuralNetwork.js",n="ca3549a02612973b7802d2e4dff1f4ac56423c88",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/NeuralNetwork.js",statementMap:{0:{start:{line:1,column:50},end:{line:1,column:151}},1:{start:{line:1,column:92},end:{line:1,column:149}},2:{start:{line:12,column:20},end:{line:34,column:1}},3:{start:{line:13,column:2},end:{line:13,column:39}},4:{start:{line:15,column:2},end:{line:17,column:3}},5:{start:{line:16,column:4},end:{line:16,column:35}},6:{start:{line:19,column:2},end:{line:19,column:30}},7:{start:{line:20,column:2},end:{line:20,column:31}},8:{start:{line:21,column:2},end:{line:21,column:31}},9:{start:{line:23,column:10},end:{line:25,column:3}},10:{start:{line:24,column:4},end:{line:24,column:33}},11:{start:{line:27,column:2},end:{line:27,column:71}},12:{start:{line:28,column:2},end:{line:28,column:72}},13:{start:{line:29,column:2},end:{line:29,column:53}},14:{start:{line:30,column:2},end:{line:30,column:53}},15:{start:{line:31,column:2},end:{line:31,column:31}},16:{start:{line:32,column:2},end:{line:32,column:25}},17:{start:{line:33,column:2},end:{line:33,column:30}},18:{start:{line:42,column:0},end:{line:45,column:2}},19:{start:{line:43,column:13},end:{line:43,column:88}},20:{start:{line:44,column:2},end:{line:44,column:33}},21:{start:{line:53,column:0},end:{line:56,column:2}},22:{start:{line:54,column:21},end:{line:54,column:92}},23:{start:{line:55,column:2},end:{line:55,column:35}},24:{start:{line:65,column:0},end:{line:84,column:2}},25:{start:{line:66,column:14},end:{line:66,column:18}},26:{start:{line:69,column:15},end:{line:69,column:43}},27:{start:{line:70,column:15},end:{line:70,column:49}},28:{start:{line:71,column:2},end:{line:71,column:45}},29:{start:{line:73,column:2},end:{line:75,column:5}},30:{start:{line:74,column:4},end:{line:74,column:50}},31:{start:{line:77,column:15},end:{line:77,column:49}},32:{start:{line:78,column:2},end:{line:78,column:45}},33:{start:{line:79,column:2},end:{line:81,column:5}},34:{start:{line:80,column:4},end:{line:80,column:50}},35:{start:{line:83,column:2},end:{line:83,column:26}},36:{start:{line:93,column:0},end:{line:142,column:2}},37:{start:{line:94,column:15},end:{line:94,column:19}},38:{start:{line:97,column:15},end:{line:97,column:43}},39:{start:{line:98,column:15},end:{line:98,column:49}},40:{start:{line:99,column:2},end:{line:99,column:45}},41:{start:{line:101,column:2},end:{line:103,column:5}},42:{start:{line:102,column:4},end:{line:102,column:51}},43:{start:{line:105,column:16},end:{line:105,column:50}},44:{start:{line:106,column:2},end:{line:106,column:47}},45:{start:{line:107,column:2},end:{line:109,column:5}},46:{start:{line:108,column:4},end:{line:108,column:51}},47:{start:{line:111,column:16},end:{line:111,column:45}},48:{start:{line:114,column:21},end:{line:114,column:57}},49:{start:{line:117,column:18},end:{line:119,column:4}},50:{start:{line:118,column:4},end:{line:118,column:52}},51:{start:{line:120,column:2},end:{line:120,column:47}},52:{start:{line:121,column:2},end:{line:121,column:52}},53:{start:{line:123,column:16},end:{line:123,column:40}},54:{start:{line:124,column:23},end:{line:124,column:53}},55:{start:{line:126,column:2},end:{line:126,column:65}},56:{start:{line:128,column:2},end:{line:128,column:52}},57:{start:{line:130,column:13},end:{line:130,column:45}},58:{start:{line:131,column:21},end:{line:131,column:51}},59:{start:{line:133,column:23},end:{line:135,column:55}},60:{start:{line:134,column:4},end:{line:134,column:52}},61:{start:{line:137,column:16},end:{line:137,column:40}},62:{start:{line:138,column:23},end:{line:138,column:58}},63:{start:{line:139,column:2},end:{line:139,column:65}},64:{start:{line:141,column:2},end:{line:141,column:57}}},fnMap:{0:{name:"_classCallCheck",decl:{start:{line:1,column:9},end:{line:1,column:24}},loc:{start:{line:1,column:48},end:{line:1,column:153}},line:1},1:{name:"NeuralNetwork",decl:{start:{line:12,column:29},end:{line:12,column:42}},loc:{start:{line:12,column:45},end:{line:34,column:1}},line:12},2:{name:"f",decl:{start:{line:23,column:19},end:{line:23,column:20}},loc:{start:{line:23,column:24},end:{line:25,column:3}},line:23},3:{name:"(anonymous_3)",decl:{start:{line:42,column:48},end:{line:42,column:49}},loc:{start:{line:42,column:60},end:{line:45,column:1}},line:42},4:{name:"(anonymous_4)",decl:{start:{line:53,column:42},end:{line:53,column:43}},loc:{start:{line:53,column:54},end:{line:56,column:1}},line:53},5:{name:"(anonymous_5)",decl:{start:{line:65,column:34},end:{line:65,column:35}},loc:{start:{line:65,column:56},end:{line:84,column:1}},line:65},6:{name:"(anonymous_6)",decl:{start:{line:73,column:22},end:{line:73,column:23}},loc:{start:{line:73,column:37},end:{line:75,column:3}},line:73},7:{name:"(anonymous_7)",decl:{start:{line:79,column:22},end:{line:79,column:23}},loc:{start:{line:79,column:37},end:{line:81,column:3}},line:79},8:{name:"(anonymous_8)",decl:{start:{line:93,column:32},end:{line:93,column:33}},loc:{start:{line:93,column:67},end:{line:142,column:1}},line:93},9:{name:"(anonymous_9)",decl:{start:{line:101,column:22},end:{line:101,column:23}},loc:{start:{line:101,column:37},end:{line:103,column:3}},line:101},10:{name:"(anonymous_10)",decl:{start:{line:107,column:24},end:{line:107,column:25}},loc:{start:{line:107,column:39},end:{line:109,column:3}},line:107},11:{name:"(anonymous_11)",decl:{start:{line:117,column:30},end:{line:117,column:31}},loc:{start:{line:117,column:45},end:{line:119,column:3}},line:117},12:{name:"(anonymous_12)",decl:{start:{line:133,column:45},end:{line:133,column:46}},loc:{start:{line:133,column:60},end:{line:135,column:3}},line:133}},branchMap:{0:{loc:{start:{line:1,column:50},end:{line:1,column:151}},type:"if",locations:[{start:{line:1,column:50},end:{line:1,column:151}},{start:{line:1,column:50},end:{line:1,column:151}}],line:1},1:{loc:{start:{line:43,column:13},end:{line:43,column:88}},type:"cond-expr",locations:[{start:{line:43,column:66},end:{line:43,column:78}},{start:{line:43,column:81},end:{line:43,column:88}}],line:43},2:{loc:{start:{line:43,column:13},end:{line:43,column:63}},type:"binary-expr",locations:[{start:{line:43,column:13},end:{line:43,column:33}},{start:{line:43,column:37},end:{line:43,column:63}}],line:43},3:{loc:{start:{line:54,column:21},end:{line:54,column:92}},type:"cond-expr",locations:[{start:{line:54,column:74},end:{line:54,column:86}},{start:{line:54,column:89},end:{line:54,column:92}}],line:54},4:{loc:{start:{line:54,column:21},end:{line:54,column:71}},type:"binary-expr",locations:[{start:{line:54,column:21},end:{line:54,column:41}},{start:{line:54,column:45},end:{line:54,column:71}}],line:54}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0]},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/NeuralNetwork.js"],names:["Matrix","sigmoid","NeuralNetwork","values","inputNodes","hiddenNodes","outputNodes","f","e","Math","random","weightsIh","weightsHo","biasH","biasO","setActivationFunction","setLearningRate","type","prototype","func","activationFunction","learningRate","predict","inputArray","inputs","fromArray","hidden","dot","of","add","map","row","output","toArray","train","targetArray","outputs","targets","outputErrors","subtract","gradients","dfunc","multiply","hiddenT","transpose","weightHoDeltas","whoT","hiddenErrors","hiddenGradient","inputsT","weightIhDeltas"],mappings:"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",sourcesContent:["import Matrix from '@astuanax/funmatrix'\nimport sigmoid from './util/sigmoid'\n\n/**\n * @class NeuralNetwork\n * @param {Number} inputNodes\n * @param {Nmber} hiddenNodes\n * @param {Number} outputNodes\n */\nclass NeuralNetwork {\n  constructor (...values) {\n    [this.inputNodes, this.hiddenNodes, this.outputNodes] = values\n\n    const f = e => Math.random() * 2 - 1\n    this.weightsIh = Matrix.random(f, this.hiddenNodes, this.inputNodes)\n    this.weightsHo = Matrix.random(f, this.outputNodes, this.hiddenNodes)\n\n    this.biasH = Matrix.random(f, this.hiddenNodes, 1)\n    this.biasO = Matrix.random(f, this.outputNodes, 1)\n\n    this.setActivationFunction()\n    this.setLearningRate()\n\n    this.type = 'NeuralNetwork'\n  }\n}\n/**\n * @memberOf NeuralNetwork\n * @function NeuralNetwork#setActivationFunction\n * @param {Function} func\n */\nNeuralNetwork.prototype.setActivationFunction = function (func = sigmoid) {\n  this.activationFunction = func\n}\n\n/**\n * @memberOf NeuralNetwork\n * @function NeuralNetwork#setLearningRate\n * @param {Number} learningRate\n */\nNeuralNetwork.prototype.setLearningRate = function (learningRate = 0.1) {\n  this.learningRate = learningRate\n}\n\n/**\n * @memberOf NeuralNetwork\n * @function NeuralNetwork#predict\n * @param {Array} inputArray\n * @returns {Array}\n */\nNeuralNetwork.prototype.predict = function (inputArray) {\n  // Generating the Hidden Outputs\n  let inputs = Matrix.fromArray(inputArray)\n  let hidden = Matrix.dot(this.weightsIh, inputs)\n  hidden = Matrix.of(hidden).add(this.biasH)\n  // activation function!\n  hidden = hidden.map(row => row.map(this.activationFunction.func))\n\n  // Generating the output's output!\n  let output = Matrix.dot(this.weightsHo, hidden)\n  output = Matrix.of(output).add(this.biasO)\n  output = output.map(row => row.map(this.activationFunction.func))\n  // Sending back to the caller!\n  return output.toArray()\n}\n\n/**\n * @memberOf NeuralNetwork\n * @function NeuralNetwork#train\n * @param {Array} inputArray\n * @param {Array} targetArray\n */\nNeuralNetwork.prototype.train = function (inputArray, targetArray) {\n  // Generating the Hidden Outputs\n  let inputs = Matrix.fromArray(inputArray)\n  let hidden = Matrix.dot(this.weightsIh, inputs)\n\n  hidden = Matrix.of(hidden).add(this.biasH)\n  // activation function!\n  hidden = hidden.map(row => row.map(this.activationFunction.func))\n\n  // Generating the output's output!\n  let outputs = Matrix.dot(this.weightsHo, hidden)\n  outputs = Matrix.of(outputs).add(this.biasO)\n  outputs = outputs.map(row => row.map(this.activationFunction.func))\n\n  // Convert array to matrix object\n  let targets = Matrix.fromArray(targetArray)\n\n  // Calculate the error\n  // ERROR = TARGETS - OUTPUTS\n  let outputErrors = Matrix.of(targets).subtract(outputs)\n\n  // let gradient = outputs * (1 - outputs);\n  // Calculate gradient\n  let gradients = outputs.map(row => row.map(this.activationFunction.dfunc))\n  gradients = gradients.multiply(outputErrors)\n  gradients = gradients.multiply(this.learningRate)\n\n  // Calculate deltas\n  let hiddenT = Matrix.transpose(hidden)\n  let weightHoDeltas = Matrix.dot(gradients, hiddenT)\n\n  // Adjust the weights by deltas\n  this.weightsHo = Matrix.of(this.weightsHo).add(weightHoDeltas)\n\n  // Adjust the bias by its deltas (which is just the gradients)\n  this.biasO = Matrix.of(this.biasO).add(gradients)\n\n  // Calculate the hidden layer errors\n  let whoT = Matrix.transpose(this.weightsHo)\n  let hiddenErrors = Matrix.dot(whoT, outputErrors)\n\n  // Calculate hidden gradient\n  let hiddenGradient = Matrix.of(hidden)\n    .map(row => row.map(this.activationFunction.dfunc))\n    .multiply(hiddenErrors)\n    .multiply(this.learningRate)\n\n  // Calcuate input->hidden deltas\n  let inputsT = Matrix.transpose(inputs)\n\n  let weightIhDeltas = Matrix.dot(hiddenGradient, inputsT)\n\n  this.weightsIh = Matrix.of(this.weightsIh).add(weightIhDeltas)\n  // Adjust the bias by its deltas (which is just the gradients)\n  this.biasH = Matrix.of(this.biasH).add(hiddenGradient)\n}\n\nexport default NeuralNetwork\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}();h.s[2]++;var G=function A(){h.f[1]++,h.s[3]++,function(A,n){if(h.f[0]++,h.s[0]++,!(A instanceof n))throw h.b[0][0]++,h.s[1]++,new TypeError("Cannot call a class as a function");h.b[0][1]++}(this,A),h.s[4]++;for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)h.s[5]++,e[t]=arguments[t];h.s[6]++,this.inputNodes=e[0],h.s[7]++,this.hiddenNodes=e[1],h.s[8]++,this.outputNodes=e[2],h.s[9]++;var l=function(A){return h.f[2]++,h.s[10]++,2*Math.random()-1};h.s[11]++,this.weightsIh=C.a.random(l,this.hiddenNodes,this.inputNodes),h.s[12]++,this.weightsHo=C.a.random(l,this.outputNodes,this.hiddenNodes),h.s[13]++,this.biasH=C.a.random(l,this.hiddenNodes,1),h.s[14]++,this.biasO=C.a.random(l,this.outputNodes,1),h.s[15]++,this.setActivationFunction(),h.s[16]++,this.setLearningRate(),h.s[17]++,this.type="NeuralNetwork"};h.s[18]++,G.prototype.setActivationFunction=function(){h.f[3]++;var A=(h.s[19]++,h.b[2][0]++,arguments.length>0&&(h.b[2][1]++,void 0!==arguments[0])?(h.b[1][0]++,arguments[0]):(h.b[1][1]++,B));h.s[20]++,this.activationFunction=A},h.s[21]++,G.prototype.setLearningRate=function(){h.f[4]++;var A=(h.s[22]++,h.b[4][0]++,arguments.length>0&&(h.b[4][1]++,void 0!==arguments[0])?(h.b[3][0]++,arguments[0]):(h.b[3][1]++,.1));h.s[23]++,this.learningRate=A},h.s[24]++,G.prototype.predict=function(A){h.f[5]++;var n=(h.s[25]++,this),e=(h.s[26]++,C.a.fromArray(A)),t=(h.s[27]++,C.a.dot(this.weightsIh,e));h.s[28]++,t=C.a.of(t).add(this.biasH),h.s[29]++,t=t.map(function(A){return h.f[6]++,h.s[30]++,A.map(n.activationFunction.func)});var l=(h.s[31]++,C.a.dot(this.weightsHo,t));return h.s[32]++,l=C.a.of(l).add(this.biasO),h.s[33]++,l=l.map(function(A){return h.f[7]++,h.s[34]++,A.map(n.activationFunction.func)}),h.s[35]++,l.toArray()},h.s[36]++,G.prototype.train=function(A,n){h.f[8]++;var e=(h.s[37]++,this),t=(h.s[38]++,C.a.fromArray(A)),l=(h.s[39]++,C.a.dot(this.weightsIh,t));h.s[40]++,l=C.a.of(l).add(this.biasH),h.s[41]++,l=l.map(function(A){return h.f[9]++,h.s[42]++,A.map(e.activationFunction.func)});var i=(h.s[43]++,C.a.dot(this.weightsHo,l));h.s[44]++,i=C.a.of(i).add(this.biasO),h.s[45]++,i=i.map(function(A){return h.f[10]++,h.s[46]++,A.map(e.activationFunction.func)});var o=(h.s[47]++,C.a.fromArray(n)),c=(h.s[48]++,C.a.of(o).subtract(i)),a=(h.s[49]++,i.map(function(A){return h.f[11]++,h.s[50]++,A.map(e.activationFunction.dfunc)}));h.s[51]++,a=a.multiply(c),h.s[52]++,a=a.multiply(this.learningRate);var u=(h.s[53]++,C.a.transpose(l)),r=(h.s[54]++,C.a.dot(a,u));h.s[55]++,this.weightsHo=C.a.of(this.weightsHo).add(r),h.s[56]++,this.biasO=C.a.of(this.biasO).add(a);var s=(h.s[57]++,C.a.transpose(this.weightsHo)),m=(h.s[58]++,C.a.dot(s,c)),d=(h.s[59]++,C.a.of(l).map(function(A){return h.f[12]++,h.s[60]++,A.map(e.activationFunction.dfunc)}).multiply(m).multiply(this.learningRate)),f=(h.s[61]++,C.a.transpose(t)),p=(h.s[62]++,C.a.dot(d,f));h.s[63]++,this.weightsIh=C.a.of(this.weightsIh).add(p),h.s[64]++,this.biasH=C.a.of(this.biasH).add(d)};var M=G,I=function(){var A="/Volumes/BigOne/github/funml/src/util/tanh.js",n="f53d758e8231aecfe3c60e86708c3e916bb83fe5",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/util/tanh.js",statementMap:{0:{start:{line:7,column:11},end:{line:11,column:2}},1:{start:{line:8,column:2},end:{line:8,column:22}},2:{start:{line:10,column:2},end:{line:10,column:19}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:7,column:34},end:{line:7,column:35}},loc:{start:{line:7,column:47},end:{line:9,column:1}},line:7},1:{name:"(anonymous_1)",decl:{start:{line:9,column:3},end:{line:9,column:4}},loc:{start:{line:9,column:16},end:{line:11,column:1}},line:9}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/util/tanh.js"],names:["ActivationFunction","tanh","x","Math","y"],mappings:"AAAA,OAAOA,kBAAP,MAA+B,uBAA/B;AAEA;;;;;AAIA,IAAMC,IAAI,GAAG,IAAID,kBAAJ,CACX,UAAAE,CAAC;AAAA,SAAIC,IAAI,CAACF,IAAL,CAAUC,CAAV,CAAJ;AAAA,CADU,EAEX,UAAAE,CAAC;AAAA,SAAI,IAAKA,CAAC,GAAGA,CAAb;AAAA,CAFU,CAAb;AAIA,eAAeH,IAAf",sourcesContent:["import ActivationFunction from '../ActivationFunction'\n\n/**\n * @function tanh\n * @type {ActivationFunction}\n */\nconst tanh = new ActivationFunction(\n  x => Math.tanh(x),\n  y => 1 - (y * y)\n)\nexport default tanh\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}(),g=(I.s[0]++,new f(function(A){return I.f[0]++,I.s[1]++,Math.tanh(A)},function(A){return I.f[1]++,I.s[2]++,1-A*A})),b=function(){var A="/Volumes/BigOne/github/funml/src/Impurity.js",n="e9646875ce5cd36acfd26bf7e098d4dff4f8f38d",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/Impurity.js",statementMap:{0:{start:{line:1,column:50},end:{line:1,column:151}},1:{start:{line:1,column:92},end:{line:1,column:149}},2:{start:{line:7,column:15},end:{line:11,column:1}},3:{start:{line:8,column:2},end:{line:8,column:34}},4:{start:{line:10,column:2},end:{line:10,column:19}}},fnMap:{0:{name:"_classCallCheck",decl:{start:{line:1,column:9},end:{line:1,column:24}},loc:{start:{line:1,column:48},end:{line:1,column:153}},line:1},1:{name:"Impurity",decl:{start:{line:7,column:24},end:{line:7,column:32}},loc:{start:{line:7,column:39},end:{line:11,column:1}},line:7}},branchMap:{0:{loc:{start:{line:1,column:50},end:{line:1,column:151}},type:"if",locations:[{start:{line:1,column:50},end:{line:1,column:151}},{start:{line:1,column:50},end:{line:1,column:151}}],line:1}},s:{0:0,1:0,2:0,3:0,4:0},f:{0:0,1:0},b:{0:[0,0]},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/Impurity.js"],names:["Impurity","func"],mappings:";;AAAA;;;;IAIqBA,Q,GACnB,kBAAaC,IAAb,EAAmB;AAAA;;AACjB,OAAKA,IAAL,GAAYA,IAAZ;AACD,C;;SAHkBD,Q",sourcesContent:["/**\r\n * @class Impurity\r\n * @param func\r\n */\r\nexport default class Impurity {\r\n  constructor (func) {\r\n    this.func = func\r\n  }\r\n}\r\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}();b.s[2]++;var E=function A(n){b.f[1]++,b.s[3]++,function(A,n){if(b.f[0]++,b.s[0]++,!(A instanceof n))throw b.b[0][0]++,b.s[1]++,new TypeError("Cannot call a class as a function");b.b[0][1]++}(this,A),b.s[4]++,this.func=n},y=e(1),O=function(){var A="/Volumes/BigOne/github/funml/src/util/mapReduce.js",n="a2e258e003edeb1315f7173219ab942fc57e2dfd",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/util/mapReduce.js",statementMap:{0:{start:{line:2,column:16},end:{line:6,column:2}},1:{start:{line:3,column:2},end:{line:5,column:4}},2:{start:{line:4,column:4},end:{line:4,column:22}}},fnMap:{0:{name:"(anonymous_0)",decl:{start:{line:2,column:22},end:{line:2,column:23}},loc:{start:{line:2,column:38},end:{line:6,column:1}},line:2},1:{name:"(anonymous_1)",decl:{start:{line:3,column:9},end:{line:3,column:10}},loc:{start:{line:3,column:25},end:{line:5,column:3}},line:3}},branchMap:{},s:{0:0,1:0,2:0},f:{0:0,1:0},b:{},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/util/mapReduce.js"],names:["curry","mapReduce","m","r","x","y"],mappings:"AAAA,SAASA,KAAT,QAAsB,QAAtB;AAEA,IAAMC,SAAS,GAAGD,KAAK,CAAC,UAACE,CAAD,EAAIC,CAAJ;AAAA,SAAU,UAACC,CAAD,EAAIC,CAAJ;AAAA,WAAUF,CAAC,CAACC,CAAD,EAAIF,CAAC,CAACG,CAAD,CAAL,CAAX;AAAA,GAAV;AAAA,CAAD,CAAvB;AACA,eAAeJ,SAAf",sourcesContent:["import { curry } from 'fun.js'\n\nconst mapReduce = curry((m, r) => (x, y) => r(x, m(y)))\nexport default mapReduce\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}(),v=(O.s[0]++,Object(y.curry)(function(A,n){return O.f[0]++,O.s[1]++,function(e,t){return O.f[1]++,O.s[2]++,n(e,A(t))}})),D=function(){var A="/Volumes/BigOne/github/funml/src/util/entropy.js",n="bd8f4b95310aa146b773867fe3a15dc5caa26535",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/util/entropy.js",statementMap:{0:{start:{line:8,column:18},end:{line:15,column:1}},1:{start:{line:9,column:2},end:{line:14,column:4}},2:{start:{line:10,column:4},end:{line:13,column:16}},3:{start:{line:11,column:6},end:{line:11,column:26}},4:{start:{line:12,column:6},end:{line:12,column:17}},5:{start:{line:22,column:14},end:{line:38,column:2}},6:{start:{line:24,column:12},end:{line:26,column:4}},7:{start:{line:25,column:4},end:{line:25,column:31}},8:{start:{line:28,column:23},end:{line:31,column:8}},9:{start:{line:29,column:4},end:{line:29,column:58}},10:{start:{line:30,column:4},end:{line:30,column:15}},11:{start:{line:32,column:15},end:{line:32,column:31}},12:{start:{line:33,column:25},end:{line:33,column:60}},13:{start:{line:34,column:12},end:{line:36,column:31}},14:{start:{line:35,column:4},end:{line:35,column:29}},15:{start:{line:37,column:2},end:{line:37,column:13}}},fnMap:{0:{name:"frequencies",decl:{start:{line:8,column:27},end:{line:8,column:38}},loc:{start:{line:8,column:46},end:{line:15,column:1}},line:8},1:{name:"(anonymous_1)",decl:{start:{line:9,column:9},end:{line:9,column:10}},loc:{start:{line:9,column:24},end:{line:14,column:3}},line:9},2:{name:"(anonymous_2)",decl:{start:{line:10,column:16},end:{line:10,column:17}},loc:{start:{line:10,column:34},end:{line:13,column:5}},line:10},3:{name:"(anonymous_3)",decl:{start:{line:22,column:27},end:{line:22,column:28}},loc:{start:{line:22,column:45},end:{line:38,column:1}},line:22},4:{name:"(anonymous_4)",decl:{start:{line:24,column:31},end:{line:24,column:32}},loc:{start:{line:24,column:46},end:{line:26,column:3}},line:24},5:{name:"(anonymous_5)",decl:{start:{line:28,column:34},end:{line:28,column:35}},loc:{start:{line:28,column:54},end:{line:31,column:3}},line:28},6:{name:"(anonymous_6)",decl:{start:{line:34,column:27},end:{line:34,column:28}},loc:{start:{line:34,column:40},end:{line:36,column:3}},line:34}},branchMap:{0:{loc:{start:{line:29,column:15},end:{line:29,column:57}},type:"cond-expr",locations:[{start:{line:29,column:40},end:{line:29,column:41}},{start:{line:29,column:44},end:{line:29,column:57}}],line:29}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0},b:{0:[0,0]},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/util/entropy.js"],names:["Impurity","add","fold","mapReduce","frequencies","total","obj","acc","y","push","entropy","matrix","arr","__value","map","row","length","countedClasses","reduce","val","undefined","nrRows","getRows","classFrequencies","res","x","Math","log2"],mappings:"AAAA,OAAOA,QAAP,MAAqB,aAArB;AACA,SAASC,GAAT,EAAcC,IAAd,QAA0B,QAA1B;AACA,OAAOC,SAAP,MAAsB,aAAtB,C,CAEA;AACA;AACA;AACA;;AAEA,IAAMC,WAAW,GAAG,SAAdA,WAAc,CAAAC,KAAK;AAAA,SAAI,UAAAC,GAAG;AAAA,WAAIJ,IAAI,CAAC,UAACK,GAAD,EAAMC,CAAN,EAAY;AACnDD,MAAAA,GAAG,CAACE,IAAJ,CAASD,CAAC,GAAGH,KAAb;AACA,aAAOE,GAAP;AACD,KAHuC,CAAJ,CAGjC,EAHiC,EAG7BD,GAH6B,CAAJ;AAAA,GAAP;AAAA,CAAzB;AAKA;;;;;;AAIA,IAAMI,OAAO,GAAG,IAAIV,QAAJ,CACd,UAAAW,MAAM,EAAI;AACR;AACA,MAAMC,GAAG,GAAGD,MAAM,CAACE,OAAP,CAAeC,GAAf,CAAmB,UAAAC,GAAG;AAAA,WAAIA,GAAG,CAACA,GAAG,CAACC,MAAJ,GAAa,CAAd,CAAP;AAAA,GAAtB,CAAZ;;AACA,MAAMC,cAAc,GAAGL,GAAG,CAACM,MAAJ,CAAW,UAACX,GAAD,EAAMY,GAAN,EAAc;AAC9CZ,IAAAA,GAAG,CAACY,GAAD,CAAH,GAAWZ,GAAG,CAACY,GAAD,CAAH,KAAaC,SAAb,GAAyB,CAAzB,GAA6Bb,GAAG,CAACY,GAAD,CAAH,IAAY,CAApD;AACA,WAAOZ,GAAP;AACD,GAHsB,EAGpB,EAHoB,CAAvB;AAIA,MAAMc,MAAM,GAAGV,MAAM,CAACW,OAAP,EAAf;AACA,MAAMC,gBAAgB,GAAGnB,WAAW,CAACiB,MAAD,CAAX,CAAoBJ,cAApB,CAAzB;AACA,MAAMO,GAAG,GAAGtB,IAAI,CAACC,SAAS,CAAC,UAAAsB,CAAC;AAAA,WAAI,CAACA,CAAD,GAAKC,IAAI,CAACC,IAAL,CAAUF,CAAV,CAAT;AAAA,GAAF,EAAyBxB,GAAzB,CAAV,EAAyC,CAAzC,EAA4CsB,gBAA5C,CAAhB;AACA,SAAOC,GAAP;AACD,CAZa,CAAhB;AAcA,eAAed,OAAf",sourcesContent:["import Impurity from '../Impurity'\nimport { add, fold } from 'fun.js'\nimport mapReduce from './mapReduce'\n\n// const uniqsCount = fold((acc, val) => {\n//   acc[val] = acc[val] === undefined ? 1 : acc[val] += 1\n//   return acc\n// }, {})\n\nconst frequencies = total => obj => fold((acc, y) => {\n  acc.push(y / total)\n  return acc\n})([])(obj)\n\n/**\n * @function emtropy\n * @type {Impurity}\n */\nconst entropy = new Impurity(\n  matrix => {\n    // TODO check instanceof Matrix\n    const arr = matrix.__value.map(row => row[row.length - 1])\n    const countedClasses = arr.reduce((acc, val) => {\n      acc[val] = acc[val] === undefined ? 1 : acc[val] += 1\n      return acc\n    }, {})\n    const nrRows = matrix.getRows()\n    const classFrequencies = frequencies(nrRows)(countedClasses)\n    const res = fold(mapReduce(x => -x * Math.log2(x), add), 0, classFrequencies)\n    return res\n  }\n)\nexport default entropy\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}();D.s[0]++;var K=(D.s[5]++,new E(function(A){D.f[3]++;var n,e=(D.s[6]++,A.__value.map(function(A){return D.f[4]++,D.s[7]++,A[A.length-1]})),t=(D.s[8]++,e.reduce(function(A,n){return D.f[5]++,D.s[9]++,A[n]=void 0===A[n]?(D.b[0][0]++,1):(D.b[0][1]++,A[n]+=1),D.s[10]++,A},{})),l=(D.s[11]++,A.getRows()),i=(D.s[12]++,(n=l,D.f[0]++,D.s[1]++,function(A){return D.f[1]++,D.s[2]++,Object(y.fold)(function(A,e){return D.f[2]++,D.s[3]++,A.push(e/n),D.s[4]++,A})([])(A)})(t)),o=(D.s[13]++,Object(y.fold)(v(function(A){return D.f[6]++,D.s[14]++,-A*Math.log2(A)},y.add),0,i));return D.s[15]++,o})),x=function(){var A="/Volumes/BigOne/github/funml/src/Node.js",n="a8ba0e5771e31edced3b2a1c2bf48a83b565f9f2",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/Node.js",statementMap:{0:{start:{line:1,column:50},end:{line:1,column:151}},1:{start:{line:1,column:92},end:{line:1,column:149}},2:{start:{line:11,column:11},end:{line:19,column:1}},3:{start:{line:12,column:2},end:{line:12,column:30}},4:{start:{line:14,column:2},end:{line:14,column:23}},5:{start:{line:15,column:2},end:{line:15,column:21}},6:{start:{line:16,column:2},end:{line:16,column:19}},7:{start:{line:17,column:2},end:{line:17,column:21}},8:{start:{line:18,column:2},end:{line:18,column:25}}},fnMap:{0:{name:"_classCallCheck",decl:{start:{line:1,column:9},end:{line:1,column:24}},loc:{start:{line:1,column:48},end:{line:1,column:153}},line:1},1:{name:"Node",decl:{start:{line:11,column:20},end:{line:11,column:24}},loc:{start:{line:11,column:59},end:{line:19,column:1}},line:11}},branchMap:{0:{loc:{start:{line:1,column:50},end:{line:1,column:151}},type:"if",locations:[{start:{line:1,column:50},end:{line:1,column:151}},{start:{line:1,column:50},end:{line:1,column:151}}],line:1},1:{loc:{start:{line:14,column:13},end:{line:14,column:22}},type:"binary-expr",locations:[{start:{line:14,column:13},end:{line:14,column:16}},{start:{line:14,column:20},end:{line:14,column:22}}],line:14}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0},f:{0:0,1:0},b:{0:[0,0],1:[0,0]},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/Node.js"],names:["Node","results","col","value","left","right"],mappings:";;AAAA;;;;;;;;IAQMA,I,GACJ,cAAaC,OAAb,EAAsBC,GAAtB,EAA2BC,KAA3B,EAAkCC,IAAlC,EAAwCC,KAAxC,EAA+C;AAAA;;AAC7C,OAAKH,GAAL,GAAWA,GAAG,IAAI,CAAC,CAAnB;AACA,OAAKC,KAAL,GAAaA,KAAb;AACA,OAAKC,IAAL,GAAYA,IAAZ;AACA,OAAKC,KAAL,GAAaA,KAAb;AACA,OAAKJ,OAAL,GAAeA,OAAf;AACD,C;;AAGH,eAAeD,IAAf",sourcesContent:["/**\n * @class Node\n * @param {Matrix | Array} results\n * @param {Number} col\n * @param {Number | String} value\n * @param {Node} left\n * @param {Node} right\n */\nclass Node {\n  constructor (results, col, value, left, right) {\n    this.col = col || -1\n    this.value = value\n    this.left = left\n    this.right = right\n    this.results = results\n  }\n}\n\nexport default Node\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}();x.s[2]++;var w=function A(n,e,t,l,i){x.f[1]++,x.s[3]++,function(A,n){if(x.f[0]++,x.s[0]++,!(A instanceof n))throw x.b[0][0]++,x.s[1]++,new TypeError("Cannot call a class as a function");x.b[0][1]++}(this,A),x.s[4]++,this.col=(x.b[1][0]++,e||(x.b[1][1]++,-1)),x.s[5]++,this.value=t,x.s[6]++,this.left=l,x.s[7]++,this.right=i,x.s[8]++,this.results=n},S=function(){var A="/Volumes/BigOne/github/funml/src/DecisionTree.js",n="e177012f9f54918e16f2a4ae56de9e98ce0eb069",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/DecisionTree.js",statementMap:{0:{start:{line:1,column:50},end:{line:1,column:151}},1:{start:{line:1,column:92},end:{line:1,column:149}},2:{start:{line:12,column:19},end:{line:20,column:1}},3:{start:{line:13,column:21},end:{line:13,column:96}},4:{start:{line:15,column:2},end:{line:15,column:38}},5:{start:{line:17,column:2},end:{line:17,column:30}},6:{start:{line:18,column:2},end:{line:18,column:35}},7:{start:{line:19,column:2},end:{line:19,column:29}},8:{start:{line:29,column:0},end:{line:33,column:2}},9:{start:{line:30,column:2},end:{line:32,column:5}},10:{start:{line:31,column:4},end:{line:31,column:20}},11:{start:{line:43,column:0},end:{line:73,column:2}},12:{start:{line:46,column:2},end:{line:56,column:3}},13:{start:{line:48,column:4},end:{line:50,column:6}},14:{start:{line:49,column:6},end:{line:49,column:26}},15:{start:{line:53,column:4},end:{line:55,column:6}},16:{start:{line:54,column:6},end:{line:54,column:25}},17:{start:{line:58,column:13},end:{line:64,column:4}},18:{start:{line:59,column:4},end:{line:61,column:5}},19:{start:{line:60,column:6},end:{line:60,column:18}},20:{start:{line:63,column:4},end:{line:63,column:15}},21:{start:{line:65,column:14},end:{line:71,column:4}},22:{start:{line:66,column:4},end:{line:68,column:5}},23:{start:{line:67,column:6},end:{line:67,column:18}},24:{start:{line:70,column:4},end:{line:70,column:15}},25:{start:{line:72,column:2},end:{line:72,column:23}},26:{start:{line:81,column:0},end:{line:138,column:2}},27:{start:{line:82,column:14},end:{line:82,column:18}},28:{start:{line:84,column:13},end:{line:84,column:90}},29:{start:{line:86,column:2},end:{line:88,column:3}},30:{start:{line:87,column:4},end:{line:87,column:22}},31:{start:{line:90,column:14},end:{line:90,column:42}},32:{start:{line:92,column:17},end:{line:92,column:20}},33:{start:{line:93,column:22},end:{line:93,column:24}},34:{start:{line:94,column:17},end:{line:94,column:19}},35:{start:{line:95,column:20},end:{line:95,column:43}},36:{start:{line:97,column:14},end:{line:117,column:3}},37:{start:{line:98,column:23},end:{line:98,column:55}},38:{start:{line:100,column:4},end:{line:116,column:7}},39:{start:{line:101,column:24},end:{line:101,column:51}},40:{start:{line:103,column:14},end:{line:103,column:55}},41:{start:{line:105,column:21},end:{line:105,column:60}},42:{start:{line:107,column:21},end:{line:107,column:60}},43:{start:{line:109,column:17},end:{line:109,column:58}},44:{start:{line:111,column:6},end:{line:115,column:7}},45:{start:{line:112,column:8},end:{line:112,column:24}},46:{start:{line:113,column:8},end:{line:113,column:35}},47:{start:{line:114,column:8},end:{line:114,column:31}},48:{start:{line:119,column:2},end:{line:121,column:3}},49:{start:{line:120,column:4},end:{line:120,column:13}},50:{start:{line:123,column:2},end:{line:137,column:3}},51:{start:{line:124,column:22},end:{line:124,column:45}},52:{start:{line:125,column:23},end:{line:125,column:46}},53:{start:{line:127,column:16},end:{line:127,column:98}},54:{start:{line:129,column:4},end:{line:129,column:17}},55:{start:{line:131,column:4},end:{line:136,column:12}},56:{start:{line:132,column:6},end:{line:132,column:33}},57:{start:{line:134,column:6},end:{line:134,column:60}},58:{start:{line:135,column:6},end:{line:135,column:17}},59:{start:{line:147,column:0},end:{line:172,column:2}},60:{start:{line:148,column:2},end:{line:171,column:3}},61:{start:{line:149,column:4},end:{line:149,column:24}},62:{start:{line:151,column:12},end:{line:151,column:34}},63:{start:{line:154,column:4},end:{line:168,column:5}},64:{start:{line:156,column:6},end:{line:160,column:7}},65:{start:{line:157,column:8},end:{line:157,column:27}},66:{start:{line:159,column:8},end:{line:159,column:28}},67:{start:{line:163,column:6},end:{line:167,column:7}},68:{start:{line:164,column:8},end:{line:164,column:27}},69:{start:{line:166,column:8},end:{line:166,column:28}},70:{start:{line:170,column:4},end:{line:170,column:46}}},fnMap:{0:{name:"_classCallCheck",decl:{start:{line:1,column:9},end:{line:1,column:24}},loc:{start:{line:1,column:48},end:{line:1,column:153}},line:1},1:{name:"DecisionTree",decl:{start:{line:12,column:28},end:{line:12,column:40}},loc:{start:{line:12,column:47},end:{line:20,column:1}},line:12},2:{name:"(anonymous_2)",decl:{start:{line:29,column:35},end:{line:29,column:36}},loc:{start:{line:29,column:58},end:{line:33,column:1}},line:29},3:{name:"(anonymous_3)",decl:{start:{line:30,column:18},end:{line:30,column:19}},loc:{start:{line:30,column:31},end:{line:32,column:3}},line:30},4:{name:"(anonymous_4)",decl:{start:{line:43,column:31},end:{line:43,column:32}},loc:{start:{line:43,column:53},end:{line:73,column:1}},line:43},5:{name:"splittingFunction",decl:{start:{line:48,column:33},end:{line:48,column:50}},loc:{start:{line:48,column:56},end:{line:50,column:5}},line:48},6:{name:"splittingFunction",decl:{start:{line:53,column:33},end:{line:53,column:50}},loc:{start:{line:53,column:56},end:{line:55,column:5}},line:53},7:{name:"(anonymous_7)",decl:{start:{line:58,column:23},end:{line:58,column:24}},loc:{start:{line:58,column:41},end:{line:64,column:3}},line:58},8:{name:"(anonymous_8)",decl:{start:{line:65,column:24},end:{line:65,column:25}},loc:{start:{line:65,column:42},end:{line:71,column:3}},line:65},9:{name:"(anonymous_9)",decl:{start:{line:81,column:31},end:{line:81,column:32}},loc:{start:{line:81,column:43},end:{line:138,column:1}},line:81},10:{name:"_loop",decl:{start:{line:97,column:23},end:{line:97,column:28}},loc:{start:{line:97,column:32},end:{line:117,column:3}},line:97},11:{name:"(anonymous_11)",decl:{start:{line:100,column:25},end:{line:100,column:26}},loc:{start:{line:100,column:47},end:{line:116,column:5}},line:100},12:{name:"(anonymous_12)",decl:{start:{line:131,column:37},end:{line:131,column:38}},loc:{start:{line:131,column:52},end:{line:133,column:5}},line:131},13:{name:"(anonymous_13)",decl:{start:{line:133,column:14},end:{line:133,column:15}},loc:{start:{line:133,column:34},end:{line:136,column:5}},line:133},14:{name:"predict",decl:{start:{line:147,column:42},end:{line:147,column:49}},loc:{start:{line:147,column:70},end:{line:172,column:1}},line:147}},branchMap:{0:{loc:{start:{line:1,column:50},end:{line:1,column:151}},type:"if",locations:[{start:{line:1,column:50},end:{line:1,column:151}},{start:{line:1,column:50},end:{line:1,column:151}}],line:1},1:{loc:{start:{line:13,column:21},end:{line:13,column:96}},type:"cond-expr",locations:[{start:{line:13,column:74},end:{line:13,column:86}},{start:{line:13,column:89},end:{line:13,column:96}}],line:13},2:{loc:{start:{line:13,column:21},end:{line:13,column:71}},type:"binary-expr",locations:[{start:{line:13,column:21},end:{line:13,column:41}},{start:{line:13,column:45},end:{line:13,column:71}}],line:13},3:{loc:{start:{line:46,column:2},end:{line:56,column:3}},type:"if",locations:[{start:{line:46,column:2},end:{line:56,column:3}},{start:{line:46,column:2},end:{line:56,column:3}}],line:46},4:{loc:{start:{line:46,column:6},end:{line:46,column:26}},type:"binary-expr",locations:[{start:{line:46,column:6},end:{line:46,column:14}},{start:{line:46,column:18},end:{line:46,column:26}}],line:46},5:{loc:{start:{line:59,column:4},end:{line:61,column:5}},type:"if",locations:[{start:{line:59,column:4},end:{line:61,column:5}},{start:{line:59,column:4},end:{line:61,column:5}}],line:59},6:{loc:{start:{line:66,column:4},end:{line:68,column:5}},type:"if",locations:[{start:{line:66,column:4},end:{line:68,column:5}},{start:{line:66,column:4},end:{line:68,column:5}}],line:66},7:{loc:{start:{line:84,column:13},end:{line:84,column:90}},type:"cond-expr",locations:[{start:{line:84,column:66},end:{line:84,column:78}},{start:{line:84,column:81},end:{line:84,column:90}}],line:84},8:{loc:{start:{line:84,column:13},end:{line:84,column:63}},type:"binary-expr",locations:[{start:{line:84,column:13},end:{line:84,column:33}},{start:{line:84,column:37},end:{line:84,column:63}}],line:84},9:{loc:{start:{line:86,column:2},end:{line:88,column:3}},type:"if",locations:[{start:{line:86,column:2},end:{line:88,column:3}},{start:{line:86,column:2},end:{line:88,column:3}}],line:86},10:{loc:{start:{line:111,column:6},end:{line:115,column:7}},type:"if",locations:[{start:{line:111,column:6},end:{line:115,column:7}},{start:{line:111,column:6},end:{line:115,column:7}}],line:111},11:{loc:{start:{line:111,column:10},end:{line:111,column:89}},type:"binary-expr",locations:[{start:{line:111,column:10},end:{line:111,column:25}},{start:{line:111,column:29},end:{line:111,column:57}},{start:{line:111,column:61},end:{line:111,column:89}}],line:111},12:{loc:{start:{line:123,column:2},end:{line:137,column:3}},type:"if",locations:[{start:{line:123,column:2},end:{line:137,column:3}},{start:{line:123,column:2},end:{line:137,column:3}}],line:123},13:{loc:{start:{line:134,column:17},end:{line:134,column:59}},type:"cond-expr",locations:[{start:{line:134,column:42},end:{line:134,column:43}},{start:{line:134,column:46},end:{line:134,column:59}}],line:134},14:{loc:{start:{line:148,column:2},end:{line:171,column:3}},type:"if",locations:[{start:{line:148,column:2},end:{line:171,column:3}},{start:{line:148,column:2},end:{line:171,column:3}}],line:148},15:{loc:{start:{line:154,column:4},end:{line:168,column:5}},type:"if",locations:[{start:{line:154,column:4},end:{line:168,column:5}},{start:{line:154,column:4},end:{line:168,column:5}}],line:154},16:{loc:{start:{line:156,column:6},end:{line:160,column:7}},type:"if",locations:[{start:{line:156,column:6},end:{line:160,column:7}},{start:{line:156,column:6},end:{line:160,column:7}}],line:156},17:{loc:{start:{line:163,column:6},end:{line:167,column:7}},type:"if",locations:[{start:{line:163,column:6},end:{line:167,column:7}},{start:{line:163,column:6},end:{line:167,column:7}}],line:163}},s:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0,15:0,16:0,17:0,18:0,19:0,20:0,21:0,22:0,23:0,24:0,25:0,26:0,27:0,28:0,29:0,30:0,31:0,32:0,33:0,34:0,35:0,36:0,37:0,38:0,39:0,40:0,41:0,42:0,43:0,44:0,45:0,46:0,47:0,48:0,49:0,50:0,51:0,52:0,53:0,54:0,55:0,56:0,57:0,58:0,59:0,60:0,61:0,62:0,63:0,64:0,65:0,66:0,67:0,68:0,69:0,70:0},f:{0:0,1:0,2:0,3:0,4:0,5:0,6:0,7:0,8:0,9:0,10:0,11:0,12:0,13:0,14:0},b:{0:[0,0],1:[0,0],2:[0,0],3:[0,0],4:[0,0],5:[0,0],6:[0,0],7:[0,0],8:[0,0],9:[0,0],10:[0,0],11:[0,0,0],12:[0,0],13:[0,0],14:[0,0],15:[0,0],16:[0,0],17:[0,0]},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/DecisionTree.js"],names:["Matrix","entropy","Node","DecisionTree","data","evalFunction","of","type","prototype","getColumn","index","map","x","split","m","n","splittingFunction","isNaN","row","left","fold","acc","push","right","train","getRows","score","func","bestGain","bestAttribute","bestSets","columnCount","getCols","i","columnValues","__value","forEach","value","idx","matrixSplit","p","entropy0","entropy1","gain","leftTrained","rightTrained","_node","undefined","length","reduce","val","predict","observations","node","results","v","col","branch"],mappings:"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",sourcesContent:["import Matrix from '@astuanax/funmatrix'\nimport entropy from './util/entropy'\nimport Node from './Node'\n\n/**\n * @class DecisionTree\n * @param {Matrix | Array} data\n * @param {Function} evalFunction\n */\nclass DecisionTree {\n  constructor (data, evalFunction = entropy) {\n    this.data = Matrix.of(data)\n    this.evalFunction = evalFunction\n    this.type = 'DecisionTree'\n  }\n}\n\n/**\n * @memberOf DecisionTree#getColumn\n * @param data\n * @param index\n * @returns {Matrix}\n */\nDecisionTree.prototype.getColumn = function (data, index) {\n  return data.map(x => x[index])\n}\n\n/**\n * @memberOf DecisionTree#split\n * @param data\n * @param m\n * @param n\n * @returns {Matrix[]}\n */\nDecisionTree.prototype.split = function (data, m, n) {\n  let splittingFunction\n  //   splittingFunction = None\n  if (isNaN(m) || isNaN(n)) {\n    // strings\n    splittingFunction = row => row[m] === n\n  } else {\n    // numbers\n    splittingFunction = row => row[m] >= n\n  }\n  const left = data.fold((acc, x) => {\n    if (splittingFunction(x)) {\n      acc.push(x)\n    }\n    return acc\n  })\n  const right = data.fold((acc, x) => {\n    if (!splittingFunction(x)) {\n      acc.push(x)\n    }\n    return acc\n  })\n  return [left, right]\n}\n\n/**\n * @memberOf DecisionTree#train\n * @param {Matrix} data\n * @returns {Node}\n */\nDecisionTree.prototype.train = function (data = this.data) {\n  if (data.getRows() === 0) {\n    return new Node()\n  }\n  const score = this.evalFunction.func(data) // Matrix\n\n  let bestGain = 0.0\n  let bestAttribute = []\n  let bestSets = []\n\n  const columnCount = this.data.getCols() - 1 // remove last cell >> dependant value\n\n  for (let i = 0; i < columnCount; ++i) {\n    const columnValues = this.getColumn(data, i).__value\n    columnValues.forEach((value, idx) => {\n      const matrixSplit = this.split(data, i, value)\n      const p = matrixSplit[0].getRows() / data.getRows()\n      const entropy0 = this.evalFunction.func(matrixSplit[0])\n      const entropy1 = this.evalFunction.func(matrixSplit[1])\n      const gain = score - (p * entropy0) - ((1 - p) * entropy1)\n      if (gain > bestGain && matrixSplit[0].getRows() > 0 && matrixSplit[1].getRows() > 0) {\n        bestGain = gain\n        bestAttribute = [i, value]\n        bestSets = matrixSplit\n      }\n    })\n  }\n\n  if (bestGain > 0) {\n    const leftTrained = this.train(bestSets[0])\n    const rightTrained = this.train(bestSets[1])\n    const _node = new Node(undefined, bestAttribute[0], bestAttribute[1], leftTrained, rightTrained)\n    return _node\n  } else {\n    return new Node(data.__value.map(row => row[row.length - 1]).reduce((acc, val) => {\n      acc[val] = acc[val] === undefined ? 1 : acc[val] += 1\n      return acc\n    }, {}))\n  }\n}\n\n/**\n * @memberOf DecisionTree#predict\n * @param {Array} observations\n * @param {Node} node\n * @returns {*}\n */\nDecisionTree.prototype.predict = function predict (observations, node) {\n  if (node.results) {\n    return node.results\n  } else {\n    const v = observations[node.col]\n    let branch\n    if (isNaN(v)) {\n      // string\n      if (v === node.value) {\n        branch = node.left\n      } else {\n        branch = node.right\n      }\n    } else {\n      // number\n      if (v >= node.value) {\n        branch = node.left\n      } else {\n        branch = node.right\n      }\n    }\n    return this.predict(observations, branch)\n  }\n}\n\nexport default DecisionTree\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});return i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}();S.s[2]++;var N=function A(n){S.f[1]++;var e=(S.s[3]++,S.b[2][0]++,arguments.length>1&&(S.b[2][1]++,void 0!==arguments[1])?(S.b[1][0]++,arguments[1]):(S.b[1][1]++,K));S.s[4]++,function(A,n){if(S.f[0]++,S.s[0]++,!(A instanceof n))throw S.b[0][0]++,S.s[1]++,new TypeError("Cannot call a class as a function");S.b[0][1]++}(this,A),S.s[5]++,this.data=C.a.of(n),S.s[6]++,this.evalFunction=e,S.s[7]++,this.type="DecisionTree"};S.s[8]++,N.prototype.getColumn=function(A,n){return S.f[2]++,S.s[9]++,A.map(function(A){return S.f[3]++,S.s[10]++,A[n]})},S.s[11]++,N.prototype.split=function(A,n,e){var t;S.f[4]++,S.s[12]++,S.b[4][0]++,isNaN(n)||(S.b[4][1]++,isNaN(e))?(S.b[3][0]++,S.s[13]++,t=function(A){return S.f[5]++,S.s[14]++,A[n]===e}):(S.b[3][1]++,S.s[15]++,t=function(A){return S.f[6]++,S.s[16]++,A[n]>=e});var l=(S.s[17]++,A.fold(function(A,n){return S.f[7]++,S.s[18]++,t(n)?(S.b[5][0]++,S.s[19]++,A.push(n)):S.b[5][1]++,S.s[20]++,A})),i=(S.s[21]++,A.fold(function(A,n){return S.f[8]++,S.s[22]++,t(n)?S.b[6][1]++:(S.b[6][0]++,S.s[23]++,A.push(n)),S.s[24]++,A}));return S.s[25]++,[l,i]},S.s[26]++,N.prototype.train=function(){S.f[9]++;var A=(S.s[27]++,this),n=(S.s[28]++,S.b[8][0]++,arguments.length>0&&(S.b[8][1]++,void 0!==arguments[0])?(S.b[7][0]++,arguments[0]):(S.b[7][1]++,this.data));if(S.s[29]++,0===n.getRows())return S.b[9][0]++,S.s[30]++,new w;S.b[9][1]++;var e=(S.s[31]++,this.evalFunction.func(n)),t=(S.s[32]++,0),l=(S.s[33]++,[]),i=(S.s[34]++,[]),o=(S.s[35]++,this.data.getCols()-1);S.s[36]++;var c=function(o){S.f[10]++;var c=(S.s[37]++,A.getColumn(n,o).__value);S.s[38]++,c.forEach(function(c,a){S.f[11]++;var u=(S.s[39]++,A.split(n,o,c)),r=(S.s[40]++,u[0].getRows()/n.getRows()),s=(S.s[41]++,A.evalFunction.func(u[0])),m=(S.s[42]++,A.evalFunction.func(u[1])),C=(S.s[43]++,e-r*s-(1-r)*m);S.s[44]++,S.b[11][0]++,C>t&&(S.b[11][1]++,u[0].getRows()>0)&&(S.b[11][2]++,u[1].getRows()>0)?(S.b[10][0]++,S.s[45]++,t=C,S.s[46]++,l=[o,c],S.s[47]++,i=u):S.b[10][1]++})};S.s[48]++;for(var a=0;a<o;++a)S.s[49]++,c(a);if(S.s[50]++,t>0){S.b[12][0]++;var u=(S.s[51]++,this.train(i[0])),r=(S.s[52]++,this.train(i[1])),s=(S.s[53]++,new w(void 0,l[0],l[1],u,r));return S.s[54]++,s}return S.b[12][1]++,S.s[55]++,new w(n.__value.map(function(A){return S.f[12]++,S.s[56]++,A[A.length-1]}).reduce(function(A,n){return S.f[13]++,S.s[57]++,A[n]=void 0===A[n]?(S.b[13][0]++,1):(S.b[13][1]++,A[n]+=1),S.s[58]++,A},{}))},S.s[59]++,N.prototype.predict=function(A,n){if(S.f[14]++,S.s[60]++,n.results)return S.b[14][0]++,S.s[61]++,n.results;S.b[14][1]++;var e,t=(S.s[62]++,A[n.col]);return S.s[63]++,isNaN(t)?(S.b[15][0]++,S.s[64]++,t===n.value?(S.b[16][0]++,S.s[65]++,e=n.left):(S.b[16][1]++,S.s[66]++,e=n.right)):(S.b[15][1]++,S.s[67]++,t>=n.value?(S.b[17][0]++,S.s[68]++,e=n.left):(S.b[17][1]++,S.s[69]++,e=n.right)),S.s[70]++,this.predict(A,e)};var U=N;e.d(n,"Perceptron",function(){return s}),e.d(n,"NeuralNetwork",function(){return M}),e.d(n,"ActivationFunction",function(){return f}),e.d(n,"sigmoid",function(){return B}),e.d(n,"tanh",function(){return g}),e.d(n,"entropy",function(){return K}),e.d(n,"Node",function(){return w}),e.d(n,"DecisionTree",function(){return U}),e.d(n,"Impurity",function(){return E});!function(){var A="/Volumes/BigOne/github/funml/src/index.js",n="02200012e9496a72192e60c2626eb03adde5d533",e=new(0,function(){}.constructor)("return this")(),t="__coverage__",l={path:"/Volumes/BigOne/github/funml/src/index.js",statementMap:{},fnMap:{},branchMap:{},s:{},f:{},b:{},inputSourceMap:{version:3,sources:["/Volumes/BigOne/github/funml/src/index.js"],names:["default","Perceptron","NeuralNetwork","ActivationFunction","sigmoid","tanh","entropy","Node","DecisionTree","Impurity"],mappings:"AAAA,SAASA,OAAO,IAAIC,UAApB,QAAsC,cAAtC;AACA,SAASD,OAAO,IAAIE,aAApB,QAAyC,iBAAzC;AACA,SAASF,OAAO,IAAIG,kBAApB,QAA8C,sBAA9C;AACA,SAASH,OAAO,IAAII,OAApB,QAAmC,gBAAnC;AACA,SAASJ,OAAO,IAAIK,IAApB,QAAgC,aAAhC;AAEA,SAASL,OAAO,IAAIM,OAApB,QAAmC,gBAAnC;AACA,SAASN,OAAO,IAAIO,IAApB,QAAgC,QAAhC;AACA,SAASP,OAAO,IAAIQ,YAApB,QAAwC,gBAAxC;AACA,SAASR,OAAO,IAAIS,QAApB,QAAoC,YAApC",sourcesContent:["export { default as Perceptron } from './Perceptron'\nexport { default as NeuralNetwork } from './NeuralNetwork'\nexport { default as ActivationFunction } from './ActivationFunction'\nexport { default as sigmoid } from './util/sigmoid'\nexport { default as tanh } from './util/tanh'\n\nexport { default as entropy } from './util/entropy'\nexport { default as Node } from './Node'\nexport { default as DecisionTree } from './DecisionTree'\nexport { default as Impurity } from './Impurity'\n"]},_coverageSchema:"332fd63041d2c1bcb487cc26dd0d5f7d97098a6c"},i=e[t]||(e[t]={});i[A]&&i[A].hash===n?i[A]:(l.hash=n,i[A]=l)}()}])});
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9AYXN0dWFuYXgvZnVubWwvd2VicGFjay91bml2ZXJzYWxNb2R1bGVEZWZpbml0aW9uIiwid2VicGFjazovL0Bhc3R1YW5heC9mdW5tbC93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9AYXN0dWFuYXgvZnVubWwvZXh0ZXJuYWwgXCJAYXN0dWFuYXgvZnVubWF0cml4XCIiLCJ3ZWJwYWNrOi8vQGFzdHVhbmF4L2Z1bm1sL2V4dGVybmFsIFwiZnVuLmpzXCIiLCJ3ZWJwYWNrOi8vQGFzdHVhbmF4L2Z1bm1sLy4vc3JjL1BlcmNlcHRyb24uanMiLCJ3ZWJwYWNrOi8vQGFzdHVhbmF4L2Z1bm1sLy4vc3JjL0FjdGl2YXRpb25GdW5jdGlvbi5qcyIsIndlYnBhY2s6Ly9AYXN0dWFuYXgvZnVubWwvLi9zcmMvdXRpbC9zaWdtb2lkLmpzIiwid2VicGFjazovL0Bhc3R1YW5heC9mdW5tbC8uL3NyYy9OZXVyYWxOZXR3b3JrLmpzIiwid2VicGFjazovL0Bhc3R1YW5heC9mdW5tbC8uL3NyYy91dGlsL3RhbmguanMiLCJ3ZWJwYWNrOi8vQGFzdHVhbmF4L2Z1bm1sLy4vc3JjL0ltcHVyaXR5LmpzIiwid2VicGFjazovL0Bhc3R1YW5heC9mdW5tbC8uL3NyYy91dGlsL21hcFJlZHVjZS5qcyIsIndlYnBhY2s6Ly9AYXN0dWFuYXgvZnVubWwvLi9zcmMvdXRpbC9lbnRyb3B5LmpzIiwid2VicGFjazovL0Bhc3R1YW5heC9mdW5tbC8uL3NyYy9Ob2RlLmpzIiwid2VicGFjazovL0Bhc3R1YW5heC9mdW5tbC8uL3NyYy9EZWNpc2lvblRyZWUuanMiXSwibmFtZXMiOlsicm9vdCIsImZhY3RvcnkiLCJleHBvcnRzIiwibW9kdWxlIiwicmVxdWlyZSIsImRlZmluZSIsImFtZCIsInNlbGYiLCJ0aGlzIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fIiwiX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMV9fIiwiaW5zdGFsbGVkTW9kdWxlcyIsIl9fd2VicGFja19yZXF1aXJlX18iLCJtb2R1bGVJZCIsImkiLCJsIiwibW9kdWxlcyIsImNhbGwiLCJtIiwiYyIsImQiLCJuYW1lIiwiZ2V0dGVyIiwibyIsIk9iamVjdCIsImRlZmluZVByb3BlcnR5IiwiZW51bWVyYWJsZSIsImdldCIsInIiLCJTeW1ib2wiLCJ0b1N0cmluZ1RhZyIsInZhbHVlIiwidCIsIm1vZGUiLCJfX2VzTW9kdWxlIiwibnMiLCJjcmVhdGUiLCJrZXkiLCJiaW5kIiwibiIsIm9iamVjdCIsInByb3BlcnR5IiwicHJvdG90eXBlIiwiaGFzT3duUHJvcGVydHkiLCJwIiwicyIsIlBlcmNlcHRyb24iLCJ3ZWlnaHRzIiwiY292X2UyaGtpanlqeSIsImYiLCJiIiwib2YiLCJ2YWwiLCJ0eXBlIiwicHJlZGljdCIsInJvdyIsIl90aGlzIiwiYWN0aXZhdGlvbiIsImZvckVhY2giLCJ4IiwidHJhaW4iLCJsUmF0ZSIsIm5FcG9jaCIsIl90aGlzMiIsIkFycmF5IiwiYXBwbHkiLCJsZW5ndGgiLCJtYXAiLCJpZHgiLCJleHBlY3RlZCIsInNsaWNlIiwicHJlZGljdGlvbiIsImVycm9yIiwieSIsImoiLCJBY3RpdmF0aW9uRnVuY3Rpb24iLCJmdW5jIiwiZGZ1bmMiLCJjb3ZfMjd3Zmp4cTQ4eiIsImluc3RhbmNlIiwiQ29uc3RydWN0b3IiLCJUeXBlRXJyb3IiLCJfY2xhc3NDYWxsQ2hlY2siLCJzaWdtb2lkIiwiY292XzF0cjAwNWg5cXEiLCJNYXRoIiwiZXhwIiwiTmV1cmFsTmV0d29yayIsImNvdl8xaXFqcWhiZzNrIiwiX2xlbiIsImFyZ3VtZW50cyIsInZhbHVlcyIsIl9rZXkiLCJpbnB1dE5vZGVzIiwiaGlkZGVuTm9kZXMiLCJvdXRwdXROb2RlcyIsImUiLCJyYW5kb20iLCJ3ZWlnaHRzSWgiLCJNYXRyaXgiLCJ3ZWlnaHRzSG8iLCJiaWFzSCIsImJpYXNPIiwic2V0QWN0aXZhdGlvbkZ1bmN0aW9uIiwic2V0TGVhcm5pbmdSYXRlIiwidW5kZWZpbmVkIiwiYWN0aXZhdGlvbkZ1bmN0aW9uIiwibGVhcm5pbmdSYXRlIiwiaW5wdXRBcnJheSIsImlucHV0cyIsImZyb21BcnJheSIsImhpZGRlbiIsImRvdCIsImFkZCIsIm91dHB1dCIsInRvQXJyYXkiLCJ0YXJnZXRBcnJheSIsIm91dHB1dHMiLCJ0YXJnZXRzIiwib3V0cHV0RXJyb3JzIiwic3VidHJhY3QiLCJncmFkaWVudHMiLCJtdWx0aXBseSIsImhpZGRlblQiLCJ0cmFuc3Bvc2UiLCJ3ZWlnaHRIb0RlbHRhcyIsIndob1QiLCJoaWRkZW5FcnJvcnMiLCJoaWRkZW5HcmFkaWVudCIsImlucHV0c1QiLCJ3ZWlnaHRJaERlbHRhcyIsInRhbmgiLCJjb3ZfMmVsZ2xqOWFlNyIsIkltcHVyaXR5IiwiY292XzEwMmR0a2RuejMiLCJtYXBSZWR1Y2UiLCJjdXJyeSIsImNvdl8xNDVkd2lpMG5vIiwiZW50cm9weSIsIm1hdHJpeCIsImNvdl8xbW43MWxyaWl4IiwidG90YWwiLCJhcnIiLCJfX3ZhbHVlIiwiY291bnRlZENsYXNzZXMiLCJyZWR1Y2UiLCJhY2MiLCJuclJvd3MiLCJnZXRSb3dzIiwiY2xhc3NGcmVxdWVuY2llcyIsIm9iaiIsImZvbGQiLCJwdXNoIiwicmVzIiwibG9nMiIsIk5vZGUiLCJyZXN1bHRzIiwiY29sIiwibGVmdCIsInJpZ2h0IiwiY292XzE3MDdlcGkzMm4iLCJEZWNpc2lvblRyZWUiLCJkYXRhIiwiY292XzFlM2dmNWpva3QiLCJldmFsRnVuY3Rpb24iLCJnZXRDb2x1bW4iLCJpbmRleCIsInNwbGl0Iiwic3BsaXR0aW5nRnVuY3Rpb24iLCJpc05hTiIsInNjb3JlIiwiYmVzdEdhaW4iLCJiZXN0QXR0cmlidXRlIiwiYmVzdFNldHMiLCJjb2x1bW5Db3VudCIsImdldENvbHMiLCJfbG9vcCIsImNvbHVtblZhbHVlcyIsIm1hdHJpeFNwbGl0IiwiZW50cm9weTAiLCJlbnRyb3B5MSIsImdhaW4iLCJsZWZ0VHJhaW5lZCIsInJpZ2h0VHJhaW5lZCIsIl9ub2RlIiwib2JzZXJ2YXRpb25zIiwibm9k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QURBQyxhQUFJSCxFQUFhQyxFQUFLN0IsTUFtQjFCLE9BcEJLTSxFQUFBdEgsRUFBQSxNQUlENEgsTUFBTW1CLElBQUl6QixFQUFBakgsRUFBQSxTQUFBaUgsRUFBQXRILEVBQUEsTUFFUitJLElBQU1GLEVBQUszSixPQUFPb0ksRUFBQWpILEVBQUEsU0FBQWlILEVBQUF0SCxFQUFBLE1BQ3BCOEksRUFBU0QsRUFBSzVCLE9BQ1RLLEVBQUFqSCxFQUFBLFNBQUFpSCxFQUFBdEgsRUFBQSxNQUNMOEksRUFBU0QsRUFBSzNCLFNBRVhJLEVBQUFqSCxFQUFBLFNBQUFpSCxFQUFBdEgsRUFBQSxNQUVEK0ksR0FBS0YsRUFBSzNKLE9BQU9vSSxFQUFBakgsRUFBQSxTQUFBaUgsRUFBQXRILEVBQUEsTUFDbkI4SSxFQUFTRCxFQUFLNUIsT0FDVEssRUFBQWpILEVBQUEsU0FBQWlILEVBQUF0SCxFQUFBLE1BQ0w4SSxFQUFTRCxFQUFLM0IsUUFoQmJJLEVBQUF0SCxFQUFBLE1Bb0JFckMsS0FBSzhDLFFBQVFtSSxFQUFjRSxJQUl2QjFCIiwiZmlsZSI6IkBhc3R1YW5heC9mdW5tbC5taW4uanMiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24gd2VicGFja1VuaXZlcnNhbE1vZHVsZURlZmluaXRpb24ocm9vdCwgZmFjdG9yeSkge1xuXHRpZih0eXBlb2YgZXhwb3J0cyA9PT0gJ29iamVjdCcgJiYgdHlwZW9mIG1vZHVsZSA9PT0gJ29iamVjdCcpXG5cdFx0bW9kdWxlLmV4cG9ydHMgPSBmYWN0b3J5KHJlcXVpcmUoXCJAYXN0dWFuYXgvZnVubWF0cml4XCIpLCByZXF1aXJlKFwiZnVuLmpzXCIpKTtcblx0ZWxzZSBpZih0eXBlb2YgZGVmaW5lID09PSAnZnVuY3Rpb24nICYmIGRlZmluZS5hbWQpXG5cdFx0ZGVmaW5lKFwiQGFzdHVhbmF4L2Z1bm1sXCIsIFtcIkBhc3R1YW5heC9mdW5tYXRyaXhcIiwgXCJmdW4uanNcIl0sIGZhY3RvcnkpO1xuXHRlbHNlIGlmKHR5cGVvZiBleHBvcnRzID09PSAnb2JqZWN0Jylcblx0XHRleHBvcnRzW1wiQGFzdHVhbmF4L2Z1bm1sXCJdID0gZmFjdG9yeShyZXF1aXJlKFwiQGFzdHVhbmF4L2Z1bm1hdHJpeFwiKSwgcmVxdWlyZShcImZ1bi5qc1wiKSk7XG5cdGVsc2Vcblx0XHRyb290W1wiQGFzdHVhbmF4L2Z1bm1sXCJdID0gZmFjdG9yeShyb290W1wiQGFzdHVhbmF4L2Z1bm1hdHJpeFwiXSwgcm9vdFtcImZ1bi5qc1wiXSk7XG59KSh0eXBlb2Ygc2VsZiAhPT0gJ3VuZGVmaW5lZCcgPyBzZWxmIDogdGhpcywgZnVuY3Rpb24oX19XRUJQQUNLX0VYVEVSTkFMX01PRFVMRV9fMF9fLCBfX1dFQlBBQ0tfRVhURVJOQUxfTU9EVUxFX18xX18pIHtcbnJldHVybiAiLCIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMik7XG4iLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzBfXzsiLCJtb2R1bGUuZXhwb3J0cyA9IF9fV0VCUEFDS19FWFRFUk5BTF9NT0RVTEVfXzFfXzsiLCIvKipcbiAqIEBjbGFzcyBQZXJjZXB0cm9uXG4gKiBAY2xhc3NkZXNjIFBlcmNlcHRyb24gdG8gdHJhaW4gYW5kIHByZWRpY3RcbiAqIEBzZWUgb2ZcbiAqIEBleGFtcGxlXG4gKlxuICogY29uc3QgbSA9ICBQZXJjZXB0cm9uLm9mKFswLjIzNjU2OTgsIDAuNDU2Nzg5NywgMC45NTk4OTg5OCwgLTAuNDU3ODc4Nzg3XSlcbiAqXG4gKi9cbnZhciBQZXJjZXB0cm9uID0gZnVuY3Rpb24gUGVyY2VwdHJvbih3ZWlnaHRzKSB7XG4gIHRoaXMud2VpZ2h0cyA9IHdlaWdodHMgfHwgW107XG59O1xuLyoqXG4gKiBAbWVtYmVyT2YgUGVyY2VwdHJvblxuICogQHN0YXRpY1xuICogQGZ1bmN0aW9uIFBlcmNlcHRyb24ub2ZcbiAqIEBkZXNjIENyZWF0ZXMgYSBQZXJjZXB0cm9uIG9iamVjdFxuICogQHBhcmFtIHdlaWdodHMge2FycmF5fSBXZWlnaHRzIGZvciBwcmVkaWN0aW5nXG4gKiBAcmV0dXJucyB7UGVyY2VwdHJvbn1cbiAqIEBleGFtcGxlXG4gKlxuICogY29uc3Qgd2VpZ2h0cyA9IFswLjEyMzQ1NiwgMC40NTg3ODksIDAuOTk4NzQ1NF1cbiAqIGNvbnN0IG0gPSAgUGVyY2VwdHJvbi5vZih3ZWlnaHRzKVxuICpcbiAqL1xuXG5cblBlcmNlcHRyb24ub2YgPSBmdW5jdGlvbiAodmFsKSB7XG4gIGlmICh2YWwgaW5zdGFuY2VvZiBQZXJjZXB0cm9uKSByZXR1cm4gdmFsO1xuXG4gIGlmICh0aGlzIGluc3RhbmNlb2YgUGVyY2VwdHJvbikge1xuICAgIHRoaXMud2VpZ2h0cyA9IHZhbDtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHJldHVybiBuZXcgUGVyY2VwdHJvbih2YWwpO1xufTtcbi8qKlxuICogQG1lbWJlck9mIFBlcmNlcHRyb25cbiAqIEB0eXBlIHtzdHJpbmd9XG4gKi9cblxuXG5QZXJjZXB0cm9uLnByb3RvdHlwZS50eXBlID0gJ1BlcmNlcHRyb24nO1xuLyoqXG4gKiBAbWVtYmVyT2YgUGVyY2VwdHJvblxuICogQGZ1bmN0aW9uIFBlcmNlcHRyb24jcHJlZGljdFxuICogQHBhcmFtIHJvdyB7QXJyYXl9IEFycmF5IG9mIHZhbHVlcyB0byBwcmVkaWN0XG4gKiBAcmV0dXJucyB7Qm9vbGVhbn1cbiAqIEBleGFtcGxlXG4gKlxuICogY29uc3QgbSA9ICBQZXJjZXB0cm9uLm9mKClcbiAqIGNvbnN0IHRyYWluICA9IFsuLi5dIC8vIGRhdGFzZXQ6IFtbMCwxLDJdLCBbMSwyLDNdXVxuICogbS50cmFpbih0cmFpbiwgMC4xLCAxMDAwMClcbiAqIG0ucHJlZGljdChbMSwyLDFdKSAvLyByZXR1cm5zIDEgb3IgMFxuICovXG5cblBlcmNlcHRyb24ucHJvdG90eXBlLnByZWRpY3QgPSBmdW5jdGlvbiAocm93KSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIGFjdGl2YXRpb24gPSB0aGlzLndlaWdodHNbMF07XG4gIHJvdy5mb3JFYWNoKGZ1bmN0aW9uICh4LCBpKSB7XG4gICAgYWN0aXZhdGlvbiArPSBfdGhpcy53ZWlnaHRzW2kgKyAxXSAqIHg7XG4gIH0pO1xuICByZXR1cm4gYWN0aXZhdGlvbiA+PSAwID8gMSA6IDA7XG59O1xuLyoqXG4gKiBAbWVtYmVyT2YgUGVyY2VwdHJvblxuICogQGZ1bmN0aW9uIFBlcmNlcHRyb24jdHJhaW5cbiAqIEBwYXJhbSB0cmFpbiB7QXJyYXl9IERhdGFzZXQgdG8gdHJhaW4gdGhlIHByZWNlcHRyb25cbiAqIEBwYXJhbSBsUmF0ZSB7TnVtYmVyfSBTZXQgdGhlIGxlYXJuaW5nIHJhdGUgb2YgdGhlIHBlcmNlcHRyb25cbiAqIEBwYXJhbSBuRXBvY2gge051bWJlcn0gU2V0IHRoZSBudW1iZXIgb2YgaXRlcmF0aW9ucyB0byB0cmFpbiB0aGUgcGVyY2VwdHJvblxuICogQGV4YW1wbGVcbiAqXG4gKiBjb25zdCBtID0gIFBlcmNlcHRyb24ub2YoKVxuICogY29uc3QgdHJhaW4gID0gWy4uLl0gLy8gZGF0YXNldDogW1swLDEsMl0sIFsxLDIsM11dXG4gKiBtLnRyYWluKHRyYWluLCAwLjEsIDEwMDAwKVxuICogbS53ZWlnaHRzID0gWzAuMjEzMTMxLCAtMC40NTQ2NCwgMC43ODk3OTddXG4gKlxuICovXG5cblxuUGVyY2VwdHJvbi5wcm90b3R5cGUudHJhaW4gPSBmdW5jdGlvbiAodHJhaW4sIGxSYXRlLCBuRXBvY2gpIHtcbiAgdmFyIF90aGlzMiA9IHRoaXM7XG5cbiAgdGhpcy53ZWlnaHRzID0gQXJyYXkuYXBwbHkobnVsbCwgQXJyYXkodHJhaW5bMF0ubGVuZ3RoKSkubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIDA7XG4gIH0pO1xuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbkVwb2NoOyBpKyspIHtcbiAgICB0cmFpbi5mb3JFYWNoKGZ1bmN0aW9uICh4LCBpZHgpIHtcbiAgICAgIHZhciBleHBlY3RlZCA9IHguc2xpY2UoLTEpWzBdO1xuICAgICAgdmFyIHJvdyA9IHguc2xpY2UoMCwgLTEpO1xuXG4gICAgICB2YXIgcHJlZGljdGlvbiA9IF90aGlzMi5wcmVkaWN0KHJvdyk7XG5cbiAgICAgIHZhciBlcnJvciA9IGV4cGVjdGVkIC0gcHJlZGljdGlvbjtcbiAgICAgIHJvdy5mb3JFYWNoKGZ1bmN0aW9uICh5LCBqKSB7XG4gICAgICAgIF90aGlzMi53ZWlnaHRzW2ogKyAxXSArPSBsUmF0ZSAqIGVycm9yICogeTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBQZXJjZXB0cm9uOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxuICogQGNsYXNzIEFjdGl2YXRpb25GdW5jdGlvblxuICogQHBhcmFtIGZ1bmNcbiAqIEBwYXJhbSBkZnVuY1xuICovXG52YXIgQWN0aXZhdGlvbkZ1bmN0aW9uID0gZnVuY3Rpb24gQWN0aXZhdGlvbkZ1bmN0aW9uKGZ1bmMsIGRmdW5jKSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBBY3RpdmF0aW9uRnVuY3Rpb24pO1xuXG4gIHRoaXMuZnVuYyA9IGZ1bmM7XG4gIHRoaXMuZGZ1bmMgPSBkZnVuYztcbn07XG5cbmV4cG9ydCB7IEFjdGl2YXRpb25GdW5jdGlvbiBhcyBkZWZhdWx0IH07IiwiaW1wb3J0IEFjdGl2YXRpb25GdW5jdGlvbiBmcm9tICcuLi9BY3RpdmF0aW9uRnVuY3Rpb24nO1xuLyoqXG4gKiBAZnVuY3Rpb24gc2lnbW9pZFxuICogQHR5cGUge0FjdGl2YXRpb25GdW5jdGlvbn1cbiAqL1xuXG52YXIgc2lnbW9pZCA9IG5ldyBBY3RpdmF0aW9uRnVuY3Rpb24oZnVuY3Rpb24gKHgpIHtcbiAgcmV0dXJuIDEgLyAoMSArIE1hdGguZXhwKC14KSk7XG59LCBmdW5jdGlvbiAoeSkge1xuICByZXR1cm4geSAqICgxIC0geSk7XG59KTtcbmV4cG9ydCBkZWZhdWx0IHNpZ21vaWQ7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuaW1wb3J0IE1hdHJpeCBmcm9tICdAYXN0dWFuYXgvZnVubWF0cml4JztcbmltcG9ydCBzaWdtb2lkIGZyb20gJy4vdXRpbC9zaWdtb2lkJztcbi8qKlxuICogQGNsYXNzIE5ldXJhbE5ldHdvcmtcbiAqIEBwYXJhbSB7TnVtYmVyfSBpbnB1dE5vZGVzXG4gKiBAcGFyYW0ge05tYmVyfSBoaWRkZW5Ob2Rlc1xuICogQHBhcmFtIHtOdW1iZXJ9IG91dHB1dE5vZGVzXG4gKi9cblxudmFyIE5ldXJhbE5ldHdvcmsgPSBmdW5jdGlvbiBOZXVyYWxOZXR3b3JrKCkge1xuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgTmV1cmFsTmV0d29yayk7XG5cbiAgZm9yICh2YXIgX2xlbiA9IGFyZ3VtZW50cy5sZW5ndGgsIHZhbHVlcyA9IG5ldyBBcnJheShfbGVuKSwgX2tleSA9IDA7IF9rZXkgPCBfbGVuOyBfa2V5KyspIHtcbiAgICB2YWx1ZXNbX2tleV0gPSBhcmd1bWVudHNbX2tleV07XG4gIH1cblxuICB0aGlzLmlucHV0Tm9kZXMgPSB2YWx1ZXNbMF07XG4gIHRoaXMuaGlkZGVuTm9kZXMgPSB2YWx1ZXNbMV07XG4gIHRoaXMub3V0cHV0Tm9kZXMgPSB2YWx1ZXNbMl07XG5cbiAgdmFyIGYgPSBmdW5jdGlvbiBmKGUpIHtcbiAgICByZXR1cm4gTWF0aC5yYW5kb20oKSAqIDIgLSAxO1xuICB9O1xuXG4gIHRoaXMud2VpZ2h0c0loID0gTWF0cml4LnJhbmRvbShmLCB0aGlzLmhpZGRlbk5vZGVzLCB0aGlzLmlucHV0Tm9kZXMpO1xuICB0aGlzLndlaWdodHNIbyA9IE1hdHJpeC5yYW5kb20oZiwgdGhpcy5vdXRwdXROb2RlcywgdGhpcy5oaWRkZW5Ob2Rlcyk7XG4gIHRoaXMuYmlhc0ggPSBNYXRyaXgucmFuZG9tKGYsIHRoaXMuaGlkZGVuTm9kZXMsIDEpO1xuICB0aGlzLmJpYXNPID0gTWF0cml4LnJhbmRvbShmLCB0aGlzLm91dHB1dE5vZGVzLCAxKTtcbiAgdGhpcy5zZXRBY3RpdmF0aW9uRnVuY3Rpb24oKTtcbiAgdGhpcy5zZXRMZWFybmluZ1JhdGUoKTtcbiAgdGhpcy50eXBlID0gJ05ldXJhbE5ldHdvcmsnO1xufTtcbi8qKlxuICogQG1lbWJlck9mIE5ldXJhbE5ldHdvcmtcbiAqIEBmdW5jdGlvbiBOZXVyYWxOZXR3b3JrI3NldEFjdGl2YXRpb25GdW5jdGlvblxuICogQHBhcmFtIHtGdW5jdGlvbn0gZnVuY1xuICovXG5cblxuTmV1cmFsTmV0d29yay5wcm90b3R5cGUuc2V0QWN0aXZhdGlvbkZ1bmN0aW9uID0gZnVuY3Rpb24gKCkge1xuICB2YXIgZnVuYyA9IGFyZ3VtZW50cy5sZW5ndGggPiAwICYmIGFyZ3VtZW50c1swXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzBdIDogc2lnbW9pZDtcbiAgdGhpcy5hY3RpdmF0aW9uRnVuY3Rpb24gPSBmdW5jO1xufTtcbi8qKlxuICogQG1lbWJlck9mIE5ldXJhbE5ldHdvcmtcbiAqIEBmdW5jdGlvbiBOZXVyYWxOZXR3b3JrI3NldExlYXJuaW5nUmF0ZVxuICogQHBhcmFtIHtOdW1iZXJ9IGxlYXJuaW5nUmF0ZVxuICovXG5cblxuTmV1cmFsTmV0d29yay5wcm90b3R5cGUuc2V0TGVhcm5pbmdSYXRlID0gZnVuY3Rpb24gKCkge1xuICB2YXIgbGVhcm5pbmdSYXRlID0gYXJndW1lbnRzLmxlbmd0aCA+IDAgJiYgYXJndW1lbnRzWzBdICE9PSB1bmRlZmluZWQgPyBhcmd1bWVudHNbMF0gOiAwLjE7XG4gIHRoaXMubGVhcm5pbmdSYXRlID0gbGVhcm5pbmdSYXRlO1xufTtcbi8qKlxuICogQG1lbWJlck9mIE5ldXJhbE5ldHdvcmtcbiAqIEBmdW5jdGlvbiBOZXVyYWxOZXR3b3JrI3ByZWRpY3RcbiAqIEBwYXJhbSB7QXJyYXl9IGlucHV0QXJyYXlcbiAqIEByZXR1cm5zIHtBcnJheX1cbiAqL1xuXG5cbk5ldXJhbE5ldHdvcmsucHJvdG90eXBlLnByZWRpY3QgPSBmdW5jdGlvbiAoaW5wdXRBcnJheSkge1xuICB2YXIgX3RoaXMgPSB0aGlzO1xuXG4gIC8vIEdlbmVyYXRpbmcgdGhlIEhpZGRlbiBPdXRwdXRzXG4gIHZhciBpbnB1dHMgPSBNYXRyaXguZnJvbUFycmF5KGlucHV0QXJyYXkpO1xuICB2YXIgaGlkZGVuID0gTWF0cml4LmRvdCh0aGlzLndlaWdodHNJaCwgaW5wdXRzKTtcbiAgaGlkZGVuID0gTWF0cml4Lm9mKGhpZGRlbikuYWRkKHRoaXMuYmlhc0gpOyAvLyBhY3RpdmF0aW9uIGZ1bmN0aW9uIVxuXG4gIGhpZGRlbiA9IGhpZGRlbi5tYXAoZnVuY3Rpb24gKHJvdykge1xuICAgIHJldHVybiByb3cubWFwKF90aGlzLmFjdGl2YXRpb25GdW5jdGlvbi5mdW5jKTtcbiAgfSk7IC8vIEdlbmVyYXRpbmcgdGhlIG91dHB1dCdzIG91dHB1dCFcblxuICB2YXIgb3V0cHV0ID0gTWF0cml4LmRvdCh0aGlzLndlaWdodHNIbywgaGlkZGVuKTtcbiAgb3V0cHV0ID0gTWF0cml4Lm9mKG91dHB1dCkuYWRkKHRoaXMuYmlhc08pO1xuICBvdXRwdXQgPSBvdXRwdXQubWFwKGZ1bmN0aW9uIChyb3cpIHtcbiAgICByZXR1cm4gcm93Lm1hcChfdGhpcy5hY3RpdmF0aW9uRnVuY3Rpb24uZnVuYyk7XG4gIH0pOyAvLyBTZW5kaW5nIGJhY2sgdG8gdGhlIGNhbGxlciFcblxuICByZXR1cm4gb3V0cHV0LnRvQXJyYXkoKTtcbn07XG4vKipcbiAqIEBtZW1iZXJPZiBOZXVyYWxOZXR3b3JrXG4gKiBAZnVuY3Rpb24gTmV1cmFsTmV0d29yayN0cmFpblxuICogQHBhcmFtIHtBcnJheX0gaW5wdXRBcnJheVxuICogQHBhcmFtIHtBcnJheX0gdGFyZ2V0QXJyYXlcbiAqL1xuXG5cbk5ldXJhbE5ldHdvcmsucHJvdG90eXBlLnRyYWluID0gZnVuY3Rpb24gKGlucHV0QXJyYXksIHRhcmdldEFycmF5KSB7XG4gIHZhciBfdGhpczIgPSB0aGlzO1xuXG4gIC8vIEdlbmVyYXRpbmcgdGhlIEhpZGRlbiBPdXRwdXRzXG4gIHZhciBpbnB1dHMgPSBNYXRyaXguZnJvbUFycmF5KGlucHV0QXJyYXkpO1xuICB2YXIgaGlkZGVuID0gTWF0cml4LmRvdCh0aGlzLndlaWdodHNJaCwgaW5wdXRzKTtcbiAgaGlkZGVuID0gTWF0cml4Lm9mKGhpZGRlbikuYWRkKHRoaXMuYmlhc0gpOyAvLyBhY3RpdmF0aW9uIGZ1bmN0aW9uIVxuXG4gIGhpZGRlbiA9IGhpZGRlbi5tYXAoZnVuY3Rpb24gKHJvdykge1xuICAgIHJldHVybiByb3cubWFwKF90aGlzMi5hY3RpdmF0aW9uRnVuY3Rpb24uZnVuYyk7XG4gIH0pOyAvLyBHZW5lcmF0aW5nIHRoZSBvdXRwdXQncyBvdXRwdXQhXG5cbiAgdmFyIG91dHB1dHMgPSBNYXRyaXguZG90KHRoaXMud2VpZ2h0c0hvLCBoaWRkZW4pO1xuICBvdXRwdXRzID0gTWF0cml4Lm9mKG91dHB1dHMpLmFkZCh0aGlzLmJpYXNPKTtcbiAgb3V0cHV0cyA9IG91dHB1dHMubWFwKGZ1bmN0aW9uIChyb3cpIHtcbiAgICByZXR1cm4gcm93Lm1hcChfdGhpczIuYWN0aXZhdGlvbkZ1bmN0aW9uLmZ1bmMpO1xuICB9KTsgLy8gQ29udmVydCBhcnJheSB0byBtYXRyaXggb2JqZWN0XG5cbiAgdmFyIHRhcmdldHMgPSBNYXRyaXguZnJvbUFycmF5KHRhcmdldEFycmF5KTsgLy8gQ2FsY3VsYXRlIHRoZSBlcnJvclxuICAvLyBFUlJPUiA9IFRBUkdFVFMgLSBPVVRQVVRTXG5cbiAgdmFyIG91dHB1dEVycm9ycyA9IE1hdHJpeC5vZih0YXJnZXRzKS5zdWJ0cmFjdChvdXRwdXRzKTsgLy8gbGV0IGdyYWRpZW50ID0gb3V0cHV0cyAqICgxIC0gb3V0cHV0cyk7XG4gIC8vIENhbGN1bGF0ZSBncmFkaWVudFxuXG4gIHZhciBncmFkaWVudHMgPSBvdXRwdXRzLm1hcChmdW5jdGlvbiAocm93KSB7XG4gICAgcmV0dXJuIHJvdy5tYXAoX3RoaXMyLmFjdGl2YXRpb25GdW5jdGlvbi5kZnVuYyk7XG4gIH0pO1xuICBncmFkaWVudHMgPSBncmFkaWVudHMubXVsdGlwbHkob3V0cHV0RXJyb3JzKTtcbiAgZ3JhZGllbnRzID0gZ3JhZGllbnRzLm11bHRpcGx5KHRoaXMubGVhcm5pbmdSYXRlKTsgLy8gQ2FsY3VsYXRlIGRlbHRhc1xuXG4gIHZhciBoaWRkZW5UID0gTWF0cml4LnRyYW5zcG9zZShoaWRkZW4pO1xuICB2YXIgd2VpZ2h0SG9EZWx0YXMgPSBNYXRyaXguZG90KGdyYWRpZW50cywgaGlkZGVuVCk7IC8vIEFkanVzdCB0aGUgd2VpZ2h0cyBieSBkZWx0YXNcblxuICB0aGlzLndlaWdodHNIbyA9IE1hdHJpeC5vZih0aGlzLndlaWdodHNIbykuYWRkKHdlaWdodEhvRGVsdGFzKTsgLy8gQWRqdXN0IHRoZSBiaWFzIGJ5IGl0cyBkZWx0YXMgKHdoaWNoIGlzIGp1c3QgdGhlIGdyYWRpZW50cylcblxuICB0aGlzLmJpYXNPID0gTWF0cml4Lm9mKHRoaXMuYmlhc08pLmFkZChncmFkaWVudHMpOyAvLyBDYWxjdWxhdGUgdGhlIGhpZGRlbiBsYXllciBlcnJvcnNcblxuICB2YXIgd2hvVCA9IE1hdHJpeC50cmFuc3Bvc2UodGhpcy53ZWlnaHRzSG8pO1xuICB2YXIgaGlkZGVuRXJyb3JzID0gTWF0cml4LmRvdCh3aG9ULCBvdXRwdXRFcnJvcnMpOyAvLyBDYWxjdWxhdGUgaGlkZGVuIGdyYWRpZW50XG5cbiAgdmFyIGhpZGRlbkdyYWRpZW50ID0gTWF0cml4Lm9mKGhpZGRlbikubWFwKGZ1bmN0aW9uIChyb3cpIHtcbiAgICByZXR1cm4gcm93Lm1hcChfdGhpczIuYWN0aXZhdGlvbkZ1bmN0aW9uLmRmdW5jKTtcbiAgfSkubXVsdGlwbHkoaGlkZGVuRXJyb3JzKS5tdWx0aXBseSh0aGlzLmxlYXJuaW5nUmF0ZSk7IC8vIENhbGN1YXRlIGlucHV0LT5oaWRkZW4gZGVsdGFzXG5cbiAgdmFyIGlucHV0c1QgPSBNYXRyaXgudHJhbnNwb3NlKGlucHV0cyk7XG4gIHZhciB3ZWlnaHRJaERlbHRhcyA9IE1hdHJpeC5kb3QoaGlkZGVuR3JhZGllbnQsIGlucHV0c1QpO1xuICB0aGlzLndlaWdodHNJaCA9IE1hdHJpeC5vZih0aGlzLndlaWdodHNJaCkuYWRkKHdlaWdodEloRGVsdGFzKTsgLy8gQWRqdXN0IHRoZSBiaWFzIGJ5IGl0cyBkZWx0YXMgKHdoaWNoIGlzIGp1c3QgdGhlIGdyYWRpZW50cylcblxuICB0aGlzLmJpYXNIID0gTWF0cml4Lm9mKHRoaXMuYmlhc0gpLmFkZChoaWRkZW5HcmFkaWVudCk7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBOZXVyYWxOZXR3b3JrOyIsImltcG9ydCBBY3RpdmF0aW9uRnVuY3Rpb24gZnJvbSAnLi4vQWN0aXZhdGlvbkZ1bmN0aW9uJztcbi8qKlxuICogQGZ1bmN0aW9uIHRhbmhcbiAqIEB0eXBlIHtBY3RpdmF0aW9uRnVuY3Rpb259XG4gKi9cblxudmFyIHRhbmggPSBuZXcgQWN0aXZhdGlvbkZ1bmN0aW9uKGZ1bmN0aW9uICh4KSB7XG4gIHJldHVybiBNYXRoLnRhbmgoeCk7XG59LCBmdW5jdGlvbiAoeSkge1xuICByZXR1cm4gMSAtIHkgKiB5O1xufSk7XG5leHBvcnQgZGVmYXVsdCB0YW5oOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbi8qKlxyXG4gKiBAY2xhc3MgSW1wdXJpdHlcclxuICogQHBhcmFtIGZ1bmNcclxuICovXG52YXIgSW1wdXJpdHkgPSBmdW5jdGlvbiBJbXB1cml0eShmdW5jKSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBJbXB1cml0eSk7XG5cbiAgdGhpcy5mdW5jID0gZnVuYztcbn07XG5cbmV4cG9ydCB7IEltcHVyaXR5IGFzIGRlZmF1bHQgfTsiLCJpbXBvcnQgeyBjdXJyeSB9IGZyb20gJ2Z1bi5qcyc7XG52YXIgbWFwUmVkdWNlID0gY3VycnkoZnVuY3Rpb24gKG0sIHIpIHtcbiAgcmV0dXJuIGZ1bmN0aW9uICh4LCB5KSB7XG4gICAgcmV0dXJuIHIoeCwgbSh5KSk7XG4gIH07XG59KTtcbmV4cG9ydCBkZWZhdWx0IG1hcFJlZHVjZTsiLCJpbXBvcnQgSW1wdXJpdHkgZnJvbSAnLi4vSW1wdXJpdHknO1xuaW1wb3J0IHsgYWRkLCBmb2xkIH0gZnJvbSAnZnVuLmpzJztcbmltcG9ydCBtYXBSZWR1Y2UgZnJvbSAnLi9tYXBSZWR1Y2UnOyAvLyBjb25zdCB1bmlxc0NvdW50ID0gZm9sZCgoYWNjLCB2YWwpID0+IHtcbi8vICAgYWNjW3ZhbF0gPSBhY2NbdmFsXSA9PT0gdW5kZWZpbmVkID8gMSA6IGFjY1t2YWxdICs9IDFcbi8vICAgcmV0dXJuIGFjY1xuLy8gfSwge30pXG5cbnZhciBmcmVxdWVuY2llcyA9IGZ1bmN0aW9uIGZyZXF1ZW5jaWVzKHRvdGFsKSB7XG4gIHJldHVybiBmdW5jdGlvbiAob2JqKSB7XG4gICAgcmV0dXJuIGZvbGQoZnVuY3Rpb24gKGFjYywgeSkge1xuICAgICAgYWNjLnB1c2goeSAvIHRvdGFsKTtcbiAgICAgIHJldHVybiBhY2M7XG4gICAgfSkoW10pKG9iaik7XG4gIH07XG59O1xuLyoqXG4gKiBAZnVuY3Rpb24gZW10cm9weVxuICogQHR5cGUge0ltcHVyaXR5fVxuICovXG5cblxudmFyIGVudHJvcHkgPSBuZXcgSW1wdXJpdHkoZnVuY3Rpb24gKG1hdHJpeCkge1xuICAvLyBUT0RPIGNoZWNrIGluc3RhbmNlb2YgTWF0cml4XG4gIHZhciBhcnIgPSBtYXRyaXguX192YWx1ZS5tYXAoZnVuY3Rpb24gKHJvdykge1xuICAgIHJldHVybiByb3dbcm93Lmxlbmd0aCAtIDFdO1xuICB9KTtcblxuICB2YXIgY291bnRlZENsYXNzZXMgPSBhcnIucmVkdWNlKGZ1bmN0aW9uIChhY2MsIHZhbCkge1xuICAgIGFjY1t2YWxdID0gYWNjW3ZhbF0gPT09IHVuZGVmaW5lZCA/IDEgOiBhY2NbdmFsXSArPSAxO1xuICAgIHJldHVybiBhY2M7XG4gIH0sIHt9KTtcbiAgdmFyIG5yUm93cyA9IG1hdHJpeC5nZXRSb3dzKCk7XG4gIHZhciBjbGFzc0ZyZXF1ZW5jaWVzID0gZnJlcXVlbmNpZXMobnJSb3dzKShjb3VudGVkQ2xhc3Nlcyk7XG4gIHZhciByZXMgPSBmb2xkKG1hcFJlZHVjZShmdW5jdGlvbiAoeCkge1xuICAgIHJldHVybiAteCAqIE1hdGgubG9nMih4KTtcbiAgfSwgYWRkKSwgMCwgY2xhc3NGcmVxdWVuY2llcyk7XG4gIHJldHVybiByZXM7XG59KTtcbmV4cG9ydCBkZWZhdWx0IGVudHJvcHk7IiwiZnVuY3Rpb24gX2NsYXNzQ2FsbENoZWNrKGluc3RhbmNlLCBDb25zdHJ1Y3RvcikgeyBpZiAoIShpbnN0YW5jZSBpbnN0YW5jZW9mIENvbnN0cnVjdG9yKSkgeyB0aHJvdyBuZXcgVHlwZUVycm9yKFwiQ2Fubm90IGNhbGwgYSBjbGFzcyBhcyBhIGZ1bmN0aW9uXCIpOyB9IH1cblxuLyoqXG4gKiBAY2xhc3MgTm9kZVxuICogQHBhcmFtIHtNYXRyaXggfCBBcnJheX0gcmVzdWx0c1xuICogQHBhcmFtIHtOdW1iZXJ9IGNvbFxuICogQHBhcmFtIHtOdW1iZXIgfCBTdHJpbmd9IHZhbHVlXG4gKiBAcGFyYW0ge05vZGV9IGxlZnRcbiAqIEBwYXJhbSB7Tm9kZX0gcmlnaHRcbiAqL1xudmFyIE5vZGUgPSBmdW5jdGlvbiBOb2RlKHJlc3VsdHMsIGNvbCwgdmFsdWUsIGxlZnQsIHJpZ2h0KSB7XG4gIF9jbGFzc0NhbGxDaGVjayh0aGlzLCBOb2RlKTtcblxuICB0aGlzLmNvbCA9IGNvbCB8fCAtMTtcbiAgdGhpcy52YWx1ZSA9IHZhbHVlO1xuICB0aGlzLmxlZnQgPSBsZWZ0O1xuICB0aGlzLnJpZ2h0ID0gcmlnaHQ7XG4gIHRoaXMucmVzdWx0cyA9IHJlc3VsdHM7XG59O1xuXG5leHBvcnQgZGVmYXVsdCBOb2RlOyIsImZ1bmN0aW9uIF9jbGFzc0NhbGxDaGVjayhpbnN0YW5jZSwgQ29uc3RydWN0b3IpIHsgaWYgKCEoaW5zdGFuY2UgaW5zdGFuY2VvZiBDb25zdHJ1Y3RvcikpIHsgdGhyb3cgbmV3IFR5cGVFcnJvcihcIkNhbm5vdCBjYWxsIGEgY2xhc3MgYXMgYSBmdW5jdGlvblwiKTsgfSB9XG5cbmltcG9ydCBNYXRyaXggZnJvbSAnQGFzdHVhbmF4L2Z1bm1hdHJpeCc7XG5pbXBvcnQgZW50cm9weSBmcm9tICcuL3V0aWwvZW50cm9weSc7XG5pbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnO1xuLyoqXG4gKiBAY2xhc3MgRGVjaXNpb25UcmVlXG4gKiBAcGFyYW0ge01hdHJpeCB8IEFycmF5fSBkYXRhXG4gKiBAcGFyYW0ge0Z1bmN0aW9ufSBldmFsRnVuY3Rpb25cbiAqL1xuXG52YXIgRGVjaXNpb25UcmVlID0gZnVuY3Rpb24gRGVjaXNpb25UcmVlKGRhdGEpIHtcbiAgdmFyIGV2YWxGdW5jdGlvbiA9IGFyZ3VtZW50cy5sZW5ndGggPiAxICYmIGFyZ3VtZW50c1sxXSAhPT0gdW5kZWZpbmVkID8gYXJndW1lbnRzWzFdIDogZW50cm9weTtcblxuICBfY2xhc3NDYWxsQ2hlY2sodGhpcywgRGVjaXNpb25UcmVlKTtcblxuICB0aGlzLmRhdGEgPSBNYXRyaXgub2YoZGF0YSk7XG4gIHRoaXMuZXZhbEZ1bmN0aW9uID0gZXZhbEZ1bmN0aW9uO1xuICB0aGlzLnR5cGUgPSAnRGVjaXNpb25UcmVlJztcbn07XG4vKipcbiAqIEBtZW1iZXJPZiBEZWNpc2lvblRyZWUjZ2V0Q29sdW1uXG4gKiBAcGFyYW0gZGF0YVxuICogQHBhcmFtIGluZGV4XG4gKiBAcmV0dXJucyB7TWF0cml4fVxuICovXG5cblxuRGVjaXNpb25UcmVlLnByb3RvdHlwZS5nZXRDb2x1bW4gPSBmdW5jdGlvbiAoZGF0YSwgaW5kZXgpIHtcbiAgcmV0dXJuIGRhdGEubWFwKGZ1bmN0aW9uICh4KSB7XG4gICAgcmV0dXJuIHhbaW5kZXhdO1xuICB9KTtcbn07XG4vKipcbiAqIEBtZW1iZXJPZiBEZWNpc2lvblRyZWUjc3BsaXRcbiAqIEBwYXJhbSBkYXRhXG4gKiBAcGFyYW0gbVxuICogQHBhcmFtIG5cbiAqIEByZXR1cm5zIHtNYXRyaXhbXX1cbiAqL1xuXG5cbkRlY2lzaW9uVHJlZS5wcm90b3R5cGUuc3BsaXQgPSBmdW5jdGlvbiAoZGF0YSwgbSwgbikge1xuICB2YXIgc3BsaXR0aW5nRnVuY3Rpb247IC8vICAgc3BsaXR0aW5nRnVuY3Rpb24gPSBOb25lXG5cbiAgaWYgKGlzTmFOKG0pIHx8IGlzTmFOKG4pKSB7XG4gICAgLy8gc3RyaW5nc1xuICAgIHNwbGl0dGluZ0Z1bmN0aW9uID0gZnVuY3Rpb24gc3BsaXR0aW5nRnVuY3Rpb24ocm93KSB7XG4gICAgICByZXR1cm4gcm93W21dID09PSBuO1xuICAgIH07XG4gIH0gZWxzZSB7XG4gICAgLy8gbnVtYmVyc1xuICAgIHNwbGl0dGluZ0Z1bmN0aW9uID0gZnVuY3Rpb24gc3BsaXR0aW5nRnVuY3Rpb24ocm93KSB7XG4gICAgICByZXR1cm4gcm93W21dID49IG47XG4gICAgfTtcbiAgfVxuXG4gIHZhciBsZWZ0ID0gZGF0YS5mb2xkKGZ1bmN0aW9uIChhY2MsIHgpIHtcbiAgICBpZiAoc3BsaXR0aW5nRnVuY3Rpb24oeCkpIHtcbiAgICAgIGFjYy5wdXNoKHgpO1xuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0pO1xuICB2YXIgcmlnaHQgPSBkYXRhLmZvbGQoZnVuY3Rpb24gKGFjYywgeCkge1xuICAgIGlmICghc3BsaXR0aW5nRnVuY3Rpb24oeCkpIHtcbiAgICAgIGFjYy5wdXNoKHgpO1xuICAgIH1cblxuICAgIHJldHVybiBhY2M7XG4gIH0pO1xuICByZXR1cm4gW2xlZnQsIHJpZ2h0XTtcbn07XG4vKipcbiAqIEBtZW1iZXJPZiBEZWNpc2lvblRyZWUjdHJhaW5cbiAqIEBwYXJhbSB7TWF0cml4fSBkYXRhXG4gKiBAcmV0dXJucyB7Tm9kZX1cbiAqL1xuXG5cbkRlY2lzaW9uVHJlZS5wcm90b3R5cGUudHJhaW4gPSBmdW5jdGlvbiAoKSB7XG4gIHZhciBfdGhpcyA9IHRoaXM7XG5cbiAgdmFyIGRhdGEgPSBhcmd1bWVudHMubGVuZ3RoID4gMCAmJiBhcmd1bWVudHNbMF0gIT09IHVuZGVmaW5lZCA/IGFyZ3VtZW50c1swXSA6IHRoaXMuZGF0YTtcblxuICBpZiAoZGF0YS5nZXRSb3dzKCkgPT09IDApIHtcbiAgICByZXR1cm4gbmV3IE5vZGUoKTtcbiAgfVxuXG4gIHZhciBzY29yZSA9IHRoaXMuZXZhbEZ1bmN0aW9uLmZ1bmMoZGF0YSk7IC8vIE1hdHJpeFxuXG4gIHZhciBiZXN0R2FpbiA9IDAuMDtcbiAgdmFyIGJlc3RBdHRyaWJ1dGUgPSBbXTtcbiAgdmFyIGJlc3RTZXRzID0gW107XG4gIHZhciBjb2x1bW5Db3VudCA9IHRoaXMuZGF0YS5nZXRDb2xzKCkgLSAxOyAvLyByZW1vdmUgbGFzdCBjZWxsID4+IGRlcGVuZGFudCB2YWx1ZVxuXG4gIHZhciBfbG9vcCA9IGZ1bmN0aW9uIF9sb29wKGkpIHtcbiAgICB2YXIgY29sdW1uVmFsdWVzID0gX3RoaXMuZ2V0Q29sdW1uKGRhdGEsIGkpLl9fdmFsdWU7XG5cbiAgICBjb2x1bW5WYWx1ZXMuZm9yRWFjaChmdW5jdGlvbiAodmFsdWUsIGlkeCkge1xuICAgICAgdmFyIG1hdHJpeFNwbGl0ID0gX3RoaXMuc3BsaXQoZGF0YSwgaSwgdmFsdWUpO1xuXG4gICAgICB2YXIgcCA9IG1hdHJpeFNwbGl0WzBdLmdldFJvd3MoKSAvIGRhdGEuZ2V0Um93cygpO1xuXG4gICAgICB2YXIgZW50cm9weTAgPSBfdGhpcy5ldmFsRnVuY3Rpb24uZnVuYyhtYXRyaXhTcGxpdFswXSk7XG5cbiAgICAgIHZhciBlbnRyb3B5MSA9IF90aGlzLmV2YWxGdW5jdGlvbi5mdW5jKG1hdHJpeFNwbGl0WzFdKTtcblxuICAgICAgdmFyIGdhaW4gPSBzY29yZSAtIHAgKiBlbnRyb3B5MCAtICgxIC0gcCkgKiBlbnRyb3B5MTtcblxuICAgICAgaWYgKGdhaW4gPiBiZXN0R2FpbiAmJiBtYXRyaXhTcGxpdFswXS5nZXRSb3dzKCkgPiAwICYmIG1hdHJpeFNwbGl0WzFdLmdldFJvd3MoKSA+IDApIHtcbiAgICAgICAgYmVzdEdhaW4gPSBnYWluO1xuICAgICAgICBiZXN0QXR0cmlidXRlID0gW2ksIHZhbHVlXTtcbiAgICAgICAgYmVzdFNldHMgPSBtYXRyaXhTcGxpdDtcbiAgICAgIH1cbiAgICB9KTtcbiAgfTtcblxuICBmb3IgKHZhciBpID0gMDsgaSA8IGNvbHVtbkNvdW50OyArK2kpIHtcbiAgICBfbG9vcChpKTtcbiAgfVxuXG4gIGlmIChiZXN0R2FpbiA+IDApIHtcbiAgICB2YXIgbGVmdFRyYWluZWQgPSB0aGlzLnRyYWluKGJlc3RTZXRzWzBdKTtcbiAgICB2YXIgcmlnaHRUcmFpbmVkID0gdGhpcy50cmFpbihiZXN0U2V0c1sxXSk7XG5cbiAgICB2YXIgX25vZGUgPSBuZXcgTm9kZSh1bmRlZmluZWQsIGJlc3RBdHRyaWJ1dGVbMF0sIGJlc3RBdHRyaWJ1dGVbMV0sIGxlZnRUcmFpbmVkLCByaWdodFRyYWluZWQpO1xuXG4gICAgcmV0dXJuIF9ub2RlO1xuICB9IGVsc2Uge1xuICAgIHJldHVybiBuZXcgTm9kZShkYXRhLl9fdmFsdWUubWFwKGZ1bmN0aW9uIChyb3cpIHtcbiAgICAgIHJldHVybiByb3dbcm93Lmxlbmd0aCAtIDFdO1xuICAgIH0pLnJlZHVjZShmdW5jdGlvbiAoYWNjLCB2YWwpIHtcbiAgICAgIGFjY1t2YWxdID0gYWNjW3ZhbF0gPT09IHVuZGVmaW5lZCA/IDEgOiBhY2NbdmFsXSArPSAxO1xuICAgICAgcmV0dXJuIGFjYztcbiAgICB9LCB7fSkpO1xuICB9XG59O1xuLyoqXG4gKiBAbWVtYmVyT2YgRGVjaXNpb25UcmVlI3ByZWRpY3RcbiAqIEBwYXJhbSB7QXJyYXl9IG9ic2VydmF0aW9uc1xuICogQHBhcmFtIHtOb2RlfSBub2RlXG4gKiBAcmV0dXJucyB7Kn1cbiAqL1xuXG5cbkRlY2lzaW9uVHJlZS5wcm90b3R5cGUucHJlZGljdCA9IGZ1bmN0aW9uIHByZWRpY3Qob2JzZXJ2YXRpb25zLCBub2RlKSB7XG4gIGlmIChub2RlLnJlc3VsdHMpIHtcbiAgICByZXR1cm4gbm9kZS5yZXN1bHRzO1xuICB9IGVsc2Uge1xuICAgIHZhciB2ID0gb2JzZXJ2YXRpb25zW25vZGUuY29sXTtcbiAgICB2YXIgYnJhbmNoO1xuXG4gICAgaWYgKGlzTmFOKHYpKSB7XG4gICAgICAvLyBzdHJpbmdcbiAgICAgIGlmICh2ID09PSBub2RlLnZhbHVlKSB7XG4gICAgICAgIGJyYW5jaCA9IG5vZGUubGVmdDtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGJyYW5jaCA9IG5vZGUucmlnaHQ7XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIG51bWJlclxuICAgICAgaWYgKHYgPj0gbm9kZS52YWx1ZSkge1xuICAgICAgICBicmFuY2ggPSBub2RlLmxlZnQ7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBicmFuY2ggPSBub2RlLnJpZ2h0O1xuICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiB0aGlzLnByZWRpY3Qob2JzZXJ2YXRpb25zLCBicmFuY2gpO1xuICB9XG59O1xuXG5leHBvcnQgZGVmYXVsdCBEZWNpc2lvblRyZWU7Il0sInNvdXJjZVJvb3QiOiIifQ==